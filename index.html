<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=1.0, user-scalable=no">
    <title>Character Generator</title>
<style>
    /* General styles */
    html, body {
        display: flex; /* Enable flex layout for vertical division */
        margin: 0;
        padding: 0;
        height: 100vh; /* Full viewport height */
        font-family: 'Trajan Pro', serif;
        background-color: #3b2f28;
        color: #e0d5c1;
		text-align: center;
        font-size: 36px; /* Increased base font size */
		transform: scale(0.5); /* Scale down to 50% */
            transform-origin: top left; /* Keep scaling from top-left corner */
            width: 400%; /* Adjust width to prevent clipping */
            height: 200%; /* Adjust height to prevent clipping */
            overflow: hidden; /* Disable scrollbars */
        
    }

    /* Panel styles */
    .left-panel {
        width: 25%; /* Reduced panel width */
        overflow-y: auto; /* Allow scrolling if content exceeds height */
        background-color: #3b2f28; /* Same as body background */
        padding: 15px; /* Reduced padding */
        box-sizing: border-box;
    }

    .right-panel {
        width: 75%; /* Reduced panel width */
        overflow-y: auto; /* Allow scrolling if content exceeds height */
        background-color: #4a3d34; /* StatusDisplay background */
        padding: 0px; /* Reduced padding */
        box-sizing: border-box;
    }

    h1, h2 , h3{
        text-align: center;
        font-family: 'Old English Text MT', serif;
        color: #d8c7a7;
        text-shadow: 2px 2px 4px #2b211a;
        font-size: 70px; /* Increased font size */
    }
	h4{
        text-align: left;
        font-family: 'Bookman Old Style', serif;
        color: #d8c7a7;
        text-shadow: 2px 2px 4px #2b211a;
        font-size: 43px; /* Increased font size */
		}
	h5{
        text-align: right;
        font-family: 'Bookman Old Style', serif;
        color: #d8c7a7;
        text-shadow: 2px 2px 4px #2b211a;
        font-size: 35px; /* Increased font size */
		}	
    label {
    display: block;
    font-family: 'Bookman Old Style', serif;
    margin: 12px 0; /* Adjusted margin */
    font-size: 46px; /* Increased font size */
    text-shadow: 1px 1px 1px #2b211a;
    text-align: center;
    width: 100%; /* Make the label width 100% */
    word-wrap: break-word; /* Ensure text wraps within the label */
}

input[type="text"], input[type="number"], select {
    background-color: #4a3d34;
    color: #e0d5c1;
    border: 2px solid #6d5c4b;
    padding: 12px; /* Reduced padding */
    font-size: 40px; /* Increased font size */
    border-radius: 4px;
    text-align: center;
    text-shadow: 1px 1px 0 #2b211a;
    box-shadow: inset 2px 2px 4px #2b211a, inset -2px -2px 4px #6d5c4b;
    width: 100%; /* Ensure input takes up full width */
    box-sizing: border-box; /* Prevent clipping of input content */
}

    button {
        background-color: #5a4c42;
        color: #e0d5c1;
        border: 2px solid #6d5c4b;
        padding: 10px 18px; /* Adjusted padding */
        font-size: 44px; /* Increased font size */
        cursor: pointer;
        border-radius: 5px;
        text-shadow: 1px 1px 0 #2b211a;
        font-family: 'Bookman Old Style', serif;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    button:hover {
        background-color: #7a665b;
        border-color: #9d8872;
    }

    #statusDisplay {
    white-space: pre;
    background-color: #4a3d34;
    padding: 0px;
    border: 2px solid #6d5c4b;
    overflow-x: auto;
    font-family: 'Bookman Old Style', serif;
    font-size: 50px; /* Increased font size */
    text-shadow: 1px 1px 0 #2b211a;
    box-shadow: inset 2px 2px 4px #2b211a, inset -2px -2px 4px #6d5c4b;
    text-align: center;
    line-height: 1.6;
}
	 #savedCharactersDropdown {
        font-size: 50px; /* Smaller font */
        padding: 25px;    /* Adjust padding */
        width: 500px;    /* Adjust width */
    }
	select {
        font-family: 'Bookman Old Style', serif;
        background-color: #4a3d34;
        color: #e0d5c1;
        border: 2px solid #6d5c4b;
        padding: 20px;
        font-size: 40px;
        border-radius: 4px;
        text-align: center;
        text-shadow: 1px 1px 0 #2b211a;
        box-shadow: inset 2px 2px 4px #2b211a, inset -2px -2px 4px #6d5c4b;
        width: 100%;
        box-sizing: border-box;
        cursor: pointer;
    }

    select:hover {
        border-color: #7a665b; /* Slightly lighter border on hover */
    }

    select:focus {
        outline: none;
        border-color: #9d8872; /* Focus border color */
    }
    /* Option styling for the dropdown */
    option {
        font-size: 20px;
        padding: 20px;
    }

#statusDisplay figure {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0; /* Remove any margin around figure */
}

#statusDisplay figure img {
    margin: 0; /* Remove space around the image */
    padding: 0; /* Ensure no padding is applied */
}

#statusDisplay p {
    margin-top: 0; /* Remove the margin above the paragraph */
    padding-top: 0; /* Make sure there's no padding on the top */
}
#statusTop {
    width: 100%;
    height: 300px; /* This defines the top section height */
  }
  
  #statusBottom {
    width: 100%;
    height: 300px; /* This defines the top section height */
  }

    .section {
        margin: 15px auto; /* Adjusted margin */
        padding: 12px; /* Reduced padding */
        background-color: #4a3d34;
        border-radius: 4px;
        border: 2px solid #6d5c4b;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        text-align: center;
    }

    .status-side-section {
        position: absolute;
        top: 50px;
        right: 20px;
        width: auto;
        height: auto;
        background-color: #4a3d34;
        border: 2px solid #6d5c4b;
        color: #e0d5c1;
        font-family: 'Courier New', Courier, monospace;
        font-size: 36px; /* Adjusted font size */
        padding: 12px; /* Reduced padding */
        box-shadow: inset 2px 2px 4px #2b211a, inset -2px -2px 4px #6d5c4b;
        border-radius: 5px;
        text-shadow: 1px 1px 1px #2b211a;
        overflow-y: auto;
    }
	/* Styling the character list container */
#characterList {
    width: 100%;
    border-collapse: collapse; /* Combine borders for a clean look */
    margin-top: 20px;
    font-family: 'Bookman Old Style', serif;
    background-color: #4a3d34; /* Match the app's color scheme */
    color: #e0d5c1; /* Text color for better contrast */
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

/* Styling the table header */
#characterList thead tr {
    background-color: #3b2f28; /* Darker background for the header */
    color: #d8c7a7; /* Text color for header */
    font-size: 40px;
    text-shadow: 1px 1px 0 #2b211a;
}

/* Styling the header cells */
#characterList th {
    padding: 10px;
    border: 2px solid #6d5c4b; /* Border color matching app design */
}

/* Styling the table rows */
#characterList tbody tr {
    transition: background-color 0.3s; /* Smooth transition for hover effect */
}

/* Alternate row coloring for better readability */
#characterList tbody tr:nth-child(odd) {
    background-color: #4e4037; /* Slightly lighter background */
}

#characterList tbody tr:nth-child(even) {
    background-color: #4a3d34;
}

/* Hover effect on table rows */
#characterList tbody tr:hover {
    background-color: #5a4c42; /* Highlight row on hover */
}

/* Styling the table cells */
#characterList td {
    padding: 10px;
    border: 2px solid #6d5c4b;
    vertical-align: middle; /* Center content vertically */
    font-size: 50px;
    text-shadow: 1px 1px 0 #2b211a;
}

/* Styling the emblem images */
#characterList img {
    border-radius: 50%; /* Circular emblem */
    border: 2px solid #6d5c4b;
    width: 100px; /* Set a consistent size */
    height: 100px;
    object-fit: cover; /* Ensure image fits within the circle */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

/* Styling the load button */
#characterList button {
    background-color: #5a4c42;
    color: #e0d5c1;
    border: 2px solid #6d5c4b;
    padding: 5px 10px;
    font-size: 40px;
    cursor: pointer;
    border-radius: 5px;
    text-shadow: 1px 1px 0 #2b211a;
    font-family: 'Bookman Old Style', serif;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

/* Button hover effect */
#characterList button:hover {
    background-color: #7a665b;
    border-color: #9d8872;
}
/* Toggleable container styling */
#characterListContainer {
    max-height: 0; /* Initially collapsed */
    overflow: hidden;
    transition: max-height 0.5s ease; /* Smooth expand/collapse */
}

/* Adjust header cursor */
h2[onclick="toggleCharacterList()"] {
    cursor: pointer;
    color: #d8c7a7;
    text-shadow: 1px 1px 0 #2b211a;
    font-family: 'Bookman Old Style', serif;
}

/* Change cursor on hover */
h2[onclick="toggleCharacterList()"]:hover {
    color: #f0e6d2;
}
h1 a {
    color: #d8c7a7; /* Matches your color scheme */
    text-decoration: none; /* No underline */
    font-size: 36px; /* Adjust font size if necessary */
}

h1 a:hover {
    color: #f0e6d2; /* Change color on hover */
    text-decoration: underline; /* Add underline on hover */
}
  #scrollToTopBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #5a4c42;
        color: #e0d5c1;
        border: 2px solid #6d5c4b;
        padding: 10px 18px;
        font-size: 44px;
        cursor: pointer;
        border-radius: 5px;
        text-shadow: 1px 1px 0 #2b211a;
        font-family: 'Bookman Old Style', serif;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    #scrollToTopBtn:hover {
        background-color: #7a665b;
        border-color: #9d8872;
    }

</style>

</head>
<body>
        

</div>
<div class="left-panel">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="600px" height="600px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
<g><path style="opacity:0.917" fill="#f2a757" d="M 404.5,208.5 C 403.833,208.5 403.167,208.5 402.5,208.5C 391.908,206.853 381.241,206.186 370.5,206.5C 369.167,206.5 367.833,206.5 366.5,206.5C 379.351,203.452 392.018,204.119 404.5,208.5 Z"/></g>
<g><path style="opacity:0.923" fill="#f2a758" d="M 245.5,210.5 C 244.368,211.354 243.035,211.354 241.5,210.5C 221.962,204.691 202.629,205.358 183.5,212.5C 183.5,212.167 183.5,211.833 183.5,211.5C 204.056,202.623 224.722,202.29 245.5,210.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa4e" d="M 241.5,210.5 C 244.161,212.272 247.161,213.605 250.5,214.5C 252.808,216.471 255.142,218.471 257.5,220.5C 258.183,220.137 258.85,219.804 259.5,219.5C 266.39,223.883 272.557,229.216 278,235.5C 278.464,234.906 278.631,234.239 278.5,233.5C 279.401,234.29 280.068,235.29 280.5,236.5C 279.957,236.56 279.624,236.893 279.5,237.5C 281.58,239.573 283.246,241.907 284.5,244.5C 284.772,247.732 286.438,249.732 289.5,250.5C 290.833,251.5 292.167,252.5 293.5,253.5C 293.325,257.66 295.325,259.994 299.5,260.5C 302.493,264.823 305.826,268.823 309.5,272.5C 309.948,275.172 311.281,277.172 313.5,278.5C 319.157,285.127 324.823,291.793 330.5,298.5C 330.491,300.308 330.991,301.975 332,303.5C 334.167,304.488 336,305.821 337.5,307.5C 342.967,313.138 348.301,318.971 353.5,325C 358.474,328.321 363.807,330.821 369.5,332.5C 372.171,334.118 375.171,334.785 378.5,334.5C 383.579,335.826 388.579,335.493 393.5,333.5C 394.791,333.737 395.791,333.404 396.5,332.5C 408.45,330.204 416.783,323.538 421.5,312.5C 419.596,311.738 417.096,310.738 414,309.5C 412.951,310.517 411.784,310.684 410.5,310C 413.167,309.333 413.167,308.667 410.5,308C 411.956,307.577 412.456,306.744 412,305.5C 410,306.167 408,306.833 406,307.5C 405.647,305.926 404.98,304.259 404,302.5C 402.601,303.227 401.101,303.727 399.5,304C 401.291,304.415 402.624,305.415 403.5,307C 402.012,308.717 400.179,309.884 398,310.5C 395.749,310.106 393.249,309.606 390.5,309C 391.517,307.951 391.684,306.784 391,305.5C 390,306.833 389,306.833 388,305.5C 387.626,306.416 387.126,307.25 386.5,308C 389.941,308.836 390.108,309.669 387,310.5C 384.119,309.957 382.119,308.291 381,305.5C 380.667,307.167 380.333,308.833 380,310.5C 378.977,309.4 378.477,308.067 378.5,306.5C 378.83,301.205 379.163,296.205 379.5,291.5C 379.833,291.5 380.167,291.5 380.5,291.5C 383.248,292.575 385.915,293.241 388.5,293.5C 386.997,295.422 384.997,296.588 382.5,297C 382.055,299.672 382.889,302.172 385,304.5C 386.744,303.351 386.911,302.017 385.5,300.5C 386.906,298.974 388.072,297.307 389,295.5C 390.153,297.497 391.653,297.83 393.5,296.5C 394.326,295.549 394.492,294.549 394,293.5C 393.086,294.654 392.253,294.487 391.5,293C 395.167,292.333 398.833,292.333 402.5,293C 400.875,293.853 400.542,294.853 401.5,296C 399.559,296.743 397.726,296.576 396,295.5C 395.833,295.833 395.667,296.167 395.5,296.5C 397,296.833 398.5,297.167 400,297.5C 404.647,296.09 409.48,295.256 414.5,295C 413.167,294.333 413.167,293.667 414.5,293C 415.784,292.316 416.951,292.483 418,293.5C 418.995,292.934 419.828,292.267 420.5,291.5C 423.713,291.81 426.713,291.477 429.5,290.5C 431.851,288.583 431.851,286.916 429.5,285.5C 429.5,285.167 429.5,284.833 429.5,284.5C 430.158,283.207 430.492,281.707 430.5,280C 430.592,277.179 429.926,274.679 428.5,272.5C 423.4,254.4 411.733,243.066 393.5,238.5C 392.026,237.325 390.36,236.325 388.5,235.5C 387.787,233.224 387.287,230.891 387,228.5C 386.5,229.5 386,230.5 385.5,231.5C 384.02,232.113 382.687,232.446 381.5,232.5C 383.288,233.283 384.288,234.616 384.5,236.5C 382.716,237.72 381.05,237.72 379.5,236.5C 379.815,234.774 379.981,233.107 380,231.5C 379.25,232.126 378.416,232.626 377.5,233C 378.833,234.84 378.666,235.34 377,234.5C 374.562,236.012 372.062,237.346 369.5,238.5C 364.515,239.933 359.849,241.933 355.5,244.5C 354.833,244.5 354.167,244.5 353.5,244.5C 350.447,245.28 348.78,247.28 348.5,250.5C 346.012,252.255 343.678,254.255 341.5,256.5C 341.624,257.107 341.957,257.44 342.5,257.5C 342.167,258.5 341.5,259.167 340.5,259.5C 340.103,258.475 339.437,258.308 338.5,259C 333.963,263.369 329.63,267.869 325.5,272.5C 324.5,272.5 323.5,272.5 322.5,272.5C 315.56,266.066 309.56,258.899 304.5,251C 315.436,237.894 327.769,226.394 341.5,216.5C 350.846,211.941 360.513,208.608 370.5,206.5C 381.241,206.186 391.908,206.853 402.5,208.5C 406.806,210.004 411.139,211.67 415.5,213.5C 417.181,215.008 419.181,216.008 421.5,216.5C 425.223,219.551 429.223,222.218 433.5,224.5C 434.492,224.328 435.158,224.662 435.5,225.5C 434.475,225.897 434.308,226.563 435,227.5C 446.66,237.824 454.493,250.491 458.5,265.5C 458.232,267.099 458.566,268.432 459.5,269.5C 459.816,274.844 460.316,280.178 461,285.5C 461.498,282.183 461.665,278.85 461.5,275.5C 462.833,283.167 462.833,290.833 461.5,298.5C 460.996,282.514 460.163,282.514 459,298.5C 457.244,299.421 457.077,300.588 458.5,302C 457.13,308.605 455.463,315.105 453.5,321.5C 451.671,325.149 449.337,328.482 446.5,331.5C 443.027,332.319 441.36,334.986 441.5,339.5C 429.209,352.147 414.543,360.481 397.5,364.5C 394.07,364.893 390.904,364.227 388,362.5C 383.822,364.399 379.322,365.065 374.5,364.5C 374.217,363.711 373.717,363.044 373,362.5C 370.959,363.423 368.792,363.756 366.5,363.5C 347.835,359.475 332.502,350.142 320.5,335.5C 309.255,321.378 297.755,307.378 286,293.5C 284.906,291.922 284.072,290.255 283.5,288.5C 285.635,286.94 285.802,285.273 284,283.5C 283.667,283.833 283.333,284.167 283,284.5C 282.544,283.256 283.044,282.423 284.5,282C 283.299,281.097 282.465,279.931 282,278.5C 280.214,279.787 280.047,281.287 281.5,283C 281.164,284.03 280.497,284.53 279.5,284.5C 268.659,273.156 258.326,261.322 248.5,249C 241.364,242.768 233.03,239.268 223.5,238.5C 223.5,237.833 223.167,237.5 222.5,237.5C 219.638,236.868 216.804,235.868 214,234.5C 212.893,235.712 212.393,235.379 212.5,233.5C 211.732,234.263 211.232,235.263 211,236.5C 206.722,236.094 202.889,237.427 199.5,240.5C 189.281,243.22 181.115,248.887 175,257.5C 173.878,259.407 173.045,261.407 172.5,263.5C 168.972,267.705 167.306,272.705 167.5,278.5C 166.167,283.833 166.167,289.167 167.5,294.5C 167.338,296.527 167.505,298.527 168,300.5C 171.071,310.312 176.571,318.312 184.5,324.5C 185.553,325.438 186.22,326.605 186.5,328C 186.433,338.666 186.433,349.499 186.5,360.5C 169.207,353.54 155.54,342.207 145.5,326.5C 145.672,325.508 145.338,324.842 144.5,324.5C 143.958,321.088 142.625,318.088 140.5,315.5C 140.672,314.508 140.338,313.842 139.5,313.5C 139.59,310.848 138.924,308.515 137.5,306.5C 137.5,304.167 137.5,301.833 137.5,299.5C 136.7,293.649 136.367,287.983 136.5,282.5C 136.998,277.848 137.331,273.181 137.5,268.5C 138.404,267.791 138.737,266.791 138.5,265.5C 140.411,261.767 141.744,257.767 142.5,253.5C 149.565,239.426 159.565,227.759 172.5,218.5C 174.954,217.773 177.287,216.773 179.5,215.5C 181.455,215.201 182.789,214.201 183.5,212.5C 202.629,205.358 221.962,204.691 241.5,210.5 Z"/></g>
<g><path style="opacity:0.929" fill="#f2a758" d="M 366.5,206.5 C 367.833,206.5 369.167,206.5 370.5,206.5C 360.513,208.608 350.846,211.941 341.5,216.5C 341.833,215.833 342.167,215.167 342.5,214.5C 349.949,210.462 357.949,207.795 366.5,206.5 Z"/></g>
<g><path style="opacity:0.946" fill="#f3a759" d="M 402.5,208.5 C 403.167,208.5 403.833,208.5 404.5,208.5C 407.968,209.101 411.301,210.101 414.5,211.5C 414.833,212.167 415.167,212.833 415.5,213.5C 411.139,211.67 406.806,210.004 402.5,208.5 Z"/></g>
<g><path style="opacity:1" fill="#f4a954" d="M 241.5,210.5 C 243.035,211.354 244.368,211.354 245.5,210.5C 251.43,212.132 256.764,214.798 261.5,218.5C 260.508,218.328 259.842,218.662 259.5,219.5C 258.85,219.804 258.183,220.137 257.5,220.5C 255.142,218.471 252.808,216.471 250.5,214.5C 247.161,213.605 244.161,212.272 241.5,210.5 Z"/></g>
<g><path style="opacity:0.265" fill="#f4a951" d="M 183.5,211.5 C 183.5,211.833 183.5,212.167 183.5,212.5C 182.789,214.201 181.455,215.201 179.5,215.5C 178.368,214.646 177.035,214.646 175.5,215.5C 177.612,213.229 180.279,211.896 183.5,211.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f4a854" d="M 414.5,211.5 C 417.992,212.41 420.992,214.076 423.5,216.5C 422.833,216.5 422.167,216.5 421.5,216.5C 419.181,216.008 417.181,215.008 415.5,213.5C 415.167,212.833 414.833,212.167 414.5,211.5 Z"/></g>
<g><path style="opacity:0.938" fill="#f2a75a" d="M 179.5,215.5 C 177.287,216.773 174.954,217.773 172.5,218.5C 172.833,217.833 173.167,217.167 173.5,216.5C 173.842,215.662 174.508,215.328 175.5,215.5C 177.035,214.646 178.368,214.646 179.5,215.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 347.5,215.5 C 349.697,216.845 352.03,218.011 354.5,219C 353.874,219.75 353.374,220.584 353,221.5C 350.572,220.37 348.405,218.87 346.5,217C 347.056,216.617 347.389,216.117 347.5,215.5 Z"/></g>
<g><path style="opacity:0.908" fill="#f3a758" d="M 421.5,216.5 C 422.167,216.5 422.833,216.5 423.5,216.5C 427.704,218.033 431.037,220.7 433.5,224.5C 429.223,222.218 425.223,219.551 421.5,216.5 Z"/></g>
<g><path style="opacity:0.919" fill="#f2a757" d="M 173.5,216.5 C 173.167,217.167 172.833,217.833 172.5,218.5C 159.565,227.759 149.565,239.426 142.5,253.5C 142.167,253.5 141.833,253.5 141.5,253.5C 147.888,237.447 158.554,225.114 173.5,216.5 Z"/></g>
<g><path style="opacity:0.908" fill="#f2a757" d="M 259.5,219.5 C 259.842,218.662 260.508,218.328 261.5,218.5C 267.489,223.157 273.156,228.157 278.5,233.5C 278.631,234.239 278.464,234.906 278,235.5C 272.557,229.216 266.39,223.883 259.5,219.5 Z"/></g>
<g><path style="opacity:0.946" fill="#f3a757" d="M 342.5,214.5 C 342.167,215.167 341.833,215.833 341.5,216.5C 327.769,226.394 315.436,237.894 304.5,251C 309.56,258.899 315.56,266.066 322.5,272.5C 323.551,273.222 324.218,274.222 324.5,275.5C 323.167,275.167 321.833,274.833 320.5,274.5C 313.698,266.858 307.031,259.025 300.5,251C 311.718,239.608 323.385,228.608 335.5,218C 337.886,216.807 340.22,215.64 342.5,214.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 393.5,238.5 C 392.5,238.5 391.5,238.5 390.5,238.5C 388.786,237.262 386.786,236.595 384.5,236.5C 384.288,234.616 383.288,233.283 381.5,232.5C 382.687,232.446 384.02,232.113 385.5,231.5C 386,230.5 386.5,229.5 387,228.5C 387.287,230.891 387.787,233.224 388.5,235.5C 390.36,236.325 392.026,237.325 393.5,238.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 212.5,233.5 C 214.521,228.986 217.021,228.32 220,231.5C 221.011,230.663 222.178,230.33 223.5,230.5C 223.587,233.598 223.087,233.932 222,231.5C 220.667,235.5 219.333,235.5 218,231.5C 216.25,231.587 214.417,232.254 212.5,233.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa52" d="M 379.5,236.5 C 377.33,236.891 375.996,237.558 375.5,238.5C 374.791,239.404 373.791,239.737 372.5,239.5C 371.791,238.596 370.791,238.263 369.5,238.5C 372.062,237.346 374.562,236.012 377,234.5C 378.666,235.34 378.833,234.84 377.5,233C 378.416,232.626 379.25,232.126 380,231.5C 379.981,233.107 379.815,234.774 379.5,236.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa53" d="M 212.5,233.5 C 212.393,235.379 212.893,235.712 214,234.5C 216.804,235.868 219.638,236.868 222.5,237.5C 219.751,237.726 217.084,237.393 214.5,236.5C 212.023,236.927 210.356,237.594 209.5,238.5C 206.274,239.489 202.94,240.489 199.5,241.5C 199.5,241.167 199.5,240.833 199.5,240.5C 202.889,237.427 206.722,236.094 211,236.5C 211.232,235.263 211.732,234.263 212.5,233.5 Z"/></g>
<g><path style="opacity:0.948" fill="#f2a75c" d="M 222.5,237.5 C 223.167,237.5 223.5,237.833 223.5,238.5C 222.5,238.5 221.5,238.5 220.5,238.5C 216.833,238.5 213.167,238.5 209.5,238.5C 210.356,237.594 212.023,236.927 214.5,236.5C 217.084,237.393 219.751,237.726 222.5,237.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f2a75c" d="M 379.5,236.5 C 381.05,237.72 382.716,237.72 384.5,236.5C 386.786,236.595 388.786,237.262 390.5,238.5C 389.833,238.5 389.167,238.5 388.5,238.5C 384.167,238.5 379.833,238.5 375.5,238.5C 375.996,237.558 377.33,236.891 379.5,236.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f3a757" d="M 369.5,238.5 C 370.791,238.263 371.791,238.596 372.5,239.5C 366.162,241.055 360.162,243.389 354.5,246.5C 354.833,245.833 355.167,245.167 355.5,244.5C 359.849,241.933 364.515,239.933 369.5,238.5 Z"/></g>
<g><path style="opacity:0.959" fill="#f3a857" d="M 280.5,236.5 C 283.138,239.474 285.805,242.474 288.5,245.5C 288.631,246.239 288.464,246.906 288,247.5C 286.961,246.29 285.794,245.29 284.5,244.5C 283.246,241.907 281.58,239.573 279.5,237.5C 279.624,236.893 279.957,236.56 280.5,236.5 Z"/></g>
<g><path style="opacity:0.937" fill="#f3a757" d="M 199.5,240.5 C 199.5,240.833 199.5,241.167 199.5,241.5C 193.209,243.951 187.543,247.451 182.5,252C 178.877,255.449 175.877,259.283 173.5,263.5C 173.167,263.5 172.833,263.5 172.5,263.5C 173.045,261.407 173.878,259.407 175,257.5C 181.115,248.887 189.281,243.22 199.5,240.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa52" d="M 284.5,244.5 C 285.794,245.29 286.961,246.29 288,247.5C 288.464,246.906 288.631,246.239 288.5,245.5C 289.401,246.29 290.068,247.29 290.5,248.5C 289.662,248.842 289.328,249.508 289.5,250.5C 286.438,249.732 284.772,247.732 284.5,244.5 Z"/></g>
<g><path style="opacity:0.946" fill="#f2a75c" d="M 353.5,244.5 C 354.167,244.5 354.833,244.5 355.5,244.5C 355.167,245.167 354.833,245.833 354.5,246.5C 352.302,246.591 351.969,245.925 353.5,244.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f3a757" d="M 388.5,238.5 C 389.167,238.5 389.833,238.5 390.5,238.5C 391.5,238.5 392.5,238.5 393.5,238.5C 411.733,243.066 423.4,254.4 428.5,272.5C 428.167,272.5 427.833,272.5 427.5,272.5C 420.709,254.043 407.709,242.709 388.5,238.5 Z"/></g>
<g><path style="opacity:0.908" fill="#f2a758" d="M 290.5,248.5 C 291.833,249.167 292.833,250.167 293.5,251.5C 293.5,252.167 293.5,252.833 293.5,253.5C 292.167,252.5 290.833,251.5 289.5,250.5C 289.328,249.508 289.662,248.842 290.5,248.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f4a854" d="M 353.5,244.5 C 351.969,245.925 352.302,246.591 354.5,246.5C 353.167,248.5 351.5,250.167 349.5,251.5C 349.5,250.833 349.167,250.5 348.5,250.5C 348.78,247.28 350.447,245.28 353.5,244.5 Z"/></g>
<g><path style="opacity:0.954" fill="#f2a75a" d="M 141.5,253.5 C 141.833,253.5 142.167,253.5 142.5,253.5C 141.744,257.767 140.411,261.767 138.5,265.5C 138.5,264.167 138.5,262.833 138.5,261.5C 138.263,260.209 138.596,259.209 139.5,258.5C 140.931,257.22 141.598,255.553 141.5,253.5 Z"/></g>
<g><path style="opacity:0.984" fill="#f3a858" d="M 348.5,250.5 C 349.167,250.5 349.5,250.833 349.5,251.5C 347.167,253.5 344.833,255.5 342.5,257.5C 341.957,257.44 341.624,257.107 341.5,256.5C 343.678,254.255 346.012,252.255 348.5,250.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f3a757" d="M 435.5,225.5 C 446.687,235.196 454.353,247.196 458.5,261.5C 458.5,262.833 458.5,264.167 458.5,265.5C 454.493,250.491 446.66,237.824 435,227.5C 434.308,226.563 434.475,225.897 435.5,225.5 Z"/></g>
<g><path style="opacity:1" fill="#f5a953" d="M 293.5,251.5 C 294.401,252.29 295.068,253.29 295.5,254.5C 294.441,256.07 294.941,257.403 297,258.5C 297.464,257.906 297.631,257.239 297.5,256.5C 298.488,257.795 299.488,259.128 300.5,260.5C 300.167,260.5 299.833,260.5 299.5,260.5C 295.325,259.994 293.325,257.66 293.5,253.5C 293.5,252.833 293.5,252.167 293.5,251.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f2a758" d="M 295.5,254.5 C 296.5,254.833 297.167,255.5 297.5,256.5C 297.631,257.239 297.464,257.906 297,258.5C 294.941,257.403 294.441,256.07 295.5,254.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f4a850" d="M 141.5,253.5 C 141.598,255.553 140.931,257.22 139.5,258.5C 139.402,256.447 140.069,254.78 141.5,253.5 Z"/></g>
<g><path style="opacity:0.919" fill="#f2a758" d="M 340.5,259.5 C 336.473,264.194 332.14,268.527 327.5,272.5C 326.833,272.5 326.167,272.5 325.5,272.5C 329.63,267.869 333.963,263.369 338.5,259C 339.437,258.308 340.103,258.475 340.5,259.5 Z"/></g>
<g><path style="opacity:0.246" fill="#f4a852" d="M 138.5,261.5 C 138.5,262.833 138.5,264.167 138.5,265.5C 138.737,266.791 138.404,267.791 137.5,268.5C 137.167,268.5 136.833,268.5 136.5,268.5C 136.41,265.848 137.076,263.515 138.5,261.5 Z"/></g>
<g><path style="opacity:0.197" fill="#f4a94e" d="M 191.5,265.5 C 195.486,264.834 199.653,264.501 204,264.5C 208.557,264.509 212.724,265.175 216.5,266.5C 216.167,266.5 215.833,266.5 215.5,266.5C 207.684,265.508 199.684,265.174 191.5,265.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a857" d="M 299.5,260.5 C 299.833,260.5 300.167,260.5 300.5,260.5C 304.212,263.211 307.212,266.544 309.5,270.5C 309.5,271.167 309.5,271.833 309.5,272.5C 305.826,268.823 302.493,264.823 299.5,260.5 Z"/></g>
<g><path style="opacity:0.246" fill="#f4a852" d="M 458.5,261.5 C 460.04,263.838 460.706,266.505 460.5,269.5C 460.167,269.5 459.833,269.5 459.5,269.5C 458.566,268.432 458.232,267.099 458.5,265.5C 458.5,264.167 458.5,262.833 458.5,261.5 Z"/></g>
<g><path style="opacity:0.97" fill="#f3a858" d="M 191.5,265.5 C 199.684,265.174 207.684,265.508 215.5,266.5C 215.5,266.833 215.5,267.167 215.5,267.5C 213.958,266.699 212.292,266.366 210.5,266.5C 204.575,266.192 198.741,266.525 193,267.5C 192.5,277.828 192.334,288.161 192.5,298.5C 192.5,309.833 192.5,321.167 192.5,332.5C 192.5,338.5 192.5,344.5 192.5,350.5C 192.5,354.833 192.5,359.167 192.5,363.5C 192.5,373.167 192.5,382.833 192.5,392.5C 192.337,394.857 192.503,397.19 193,399.5C 194.145,400.684 195.312,400.684 196.5,399.5C 199.731,400.782 203.064,400.782 206.5,399.5C 208.628,400.629 210.961,400.796 213.5,400C 214.38,398.644 214.714,397.144 214.5,395.5C 214.5,391.5 214.5,387.5 214.5,383.5C 214.17,363.66 214.503,343.993 215.5,324.5C 215.5,350.167 215.5,375.833 215.5,401.5C 207.432,402.828 199.265,402.828 191,401.5C 190.169,355.998 190.335,310.665 191.5,265.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 210.5,266.5 C 209.828,267.267 208.995,267.934 208,268.5C 203.747,267.99 199.08,267.99 194,268.5C 193.83,278.675 193.33,288.675 192.5,298.5C 192.334,288.161 192.5,277.828 193,267.5C 198.741,266.525 204.575,266.192 210.5,266.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa4e" d="M 210.5,266.5 C 212.292,266.366 213.958,266.699 215.5,267.5C 214.72,285.917 214.72,304.917 215.5,324.5C 214.503,343.993 214.17,363.66 214.5,383.5C 213.824,386.006 212.824,388.506 211.5,391C 212.348,392.666 213.348,394.166 214.5,395.5C 214.714,397.144 214.38,398.644 213.5,400C 210.961,400.796 208.628,400.629 206.5,399.5C 207.68,397.307 208.68,394.974 209.5,392.5C 208.271,389.077 206.271,388.577 203.5,391C 208.629,393.591 208.295,395.924 202.5,398C 203.167,398.333 203.833,398.667 204.5,399C 201.854,399.497 199.187,399.664 196.5,399.5C 195.312,400.684 194.145,400.684 193,399.5C 192.503,397.19 192.337,394.857 192.5,392.5C 193.182,385.432 193.849,378.266 194.5,371C 193.877,368.393 193.21,365.893 192.5,363.5C 192.5,359.167 192.5,354.833 192.5,350.5C 193.249,349.469 193.915,348.302 194.5,347C 193.856,342.066 193.19,337.233 192.5,332.5C 192.5,321.167 192.5,309.833 192.5,298.5C 193.33,288.675 193.83,278.675 194,268.5C 199.08,267.99 203.747,267.99 208,268.5C 208.995,267.934 209.828,267.267 210.5,266.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a756" d="M 215.5,266.5 C 215.833,266.5 216.167,266.5 216.5,266.5C 216.832,311.67 216.499,356.67 215.5,401.5C 215.5,375.833 215.5,350.167 215.5,324.5C 214.72,304.917 214.72,285.917 215.5,267.5C 215.5,267.167 215.5,266.833 215.5,266.5 Z"/></g>
<g><path style="opacity:0.966" fill="#f2a759" d="M 136.5,268.5 C 136.833,268.5 137.167,268.5 137.5,268.5C 137.331,273.181 136.998,277.848 136.5,282.5C 135.903,285.941 135.237,289.275 134.5,292.5C 134.241,284.373 134.908,276.373 136.5,268.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a756" d="M 172.5,263.5 C 172.833,263.5 173.167,263.5 173.5,263.5C 171.237,268.29 169.57,273.29 168.5,278.5C 168.167,278.5 167.833,278.5 167.5,278.5C 167.306,272.705 168.972,267.705 172.5,263.5 Z"/></g>
<g><path style="opacity:0.957" fill="#f3a759" d="M 459.5,269.5 C 459.833,269.5 460.167,269.5 460.5,269.5C 461.461,271.265 461.795,273.265 461.5,275.5C 461.665,278.85 461.498,282.183 461,285.5C 460.316,280.178 459.816,274.844 459.5,269.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 278.5,271.5 C 280.75,271.181 282.75,271.681 284.5,273C 282.069,273.295 280.236,274.462 279,276.5C 278.228,275.151 277.061,274.318 275.5,274C 276.942,273.623 277.942,272.79 278.5,271.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f4a853" d="M 322.5,272.5 C 323.5,272.5 324.5,272.5 325.5,272.5C 326.167,272.5 326.833,272.5 327.5,272.5C 326.833,273.833 325.833,274.833 324.5,275.5C 324.218,274.222 323.551,273.222 322.5,272.5 Z"/></g>
<g><path style="opacity:1" fill="#f5a953" d="M 309.5,270.5 C 311.063,271.945 312.396,273.611 313.5,275.5C 312.375,276.348 312.375,277.348 313.5,278.5C 311.281,277.172 309.948,275.172 309.5,272.5C 309.5,271.833 309.5,271.167 309.5,270.5 Z"/></g>
<g><path style="opacity:0.265" fill="#f4a84f" d="M 320.5,274.5 C 321.833,274.833 323.167,275.167 324.5,275.5C 322.872,276.853 321.538,276.519 320.5,274.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a756" d="M 427.5,272.5 C 427.833,272.5 428.167,272.5 428.5,272.5C 429.926,274.679 430.592,277.179 430.5,280C 430.492,281.707 430.158,283.207 429.5,284.5C 428.619,280.546 427.952,276.546 427.5,272.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 283.5,288.5 C 281.833,287.5 280.5,286.167 279.5,284.5C 280.497,284.53 281.164,284.03 281.5,283C 280.047,281.287 280.214,279.787 282,278.5C 282.465,279.931 283.299,281.097 284.5,282C 283.044,282.423 282.544,283.256 283,284.5C 283.333,284.167 283.667,283.833 284,283.5C 285.802,285.273 285.635,286.94 283.5,288.5 Z"/></g>
<g><path style="opacity:0.259" fill="#f3a853" d="M 167.5,278.5 C 167.833,278.5 168.167,278.5 168.5,278.5C 168.5,283.833 168.5,289.167 168.5,294.5C 168.167,294.5 167.833,294.5 167.5,294.5C 166.167,289.167 166.167,283.833 167.5,278.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f3a758" d="M 313.5,275.5 C 321.179,283.848 328.513,292.515 335.5,301.5C 335.631,302.239 335.464,302.906 335,303.5C 333.264,301.937 331.764,300.27 330.5,298.5C 324.823,291.793 319.157,285.127 313.5,278.5C 312.375,277.348 312.375,276.348 313.5,275.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa52" d="M 136.5,282.5 C 136.367,287.983 136.7,293.649 137.5,299.5C 136.691,297.708 136.191,295.708 136,293.5C 135.506,295.134 135.34,296.801 135.5,298.5C 134.539,296.735 134.205,294.735 134.5,292.5C 135.237,289.275 135.903,285.941 136.5,282.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa4e" d="M 282.5,299.5 C 282.265,300.097 281.765,300.43 281,300.5C 279.247,298.704 277.08,297.538 274.5,297C 274.201,295.68 274.034,294.18 274,292.5C 273.612,291.572 272.945,290.905 272,290.5C 270.658,291.313 269.492,291.646 268.5,291.5C 269.711,292.874 270.711,294.374 271.5,296C 270.262,298.545 268.929,301.045 267.5,303.5C 267.833,303.833 268.167,304.167 268.5,304.5C 269.807,303.184 271.307,302.184 273,301.5C 273.507,302.996 273.007,304.163 271.5,305C 272.155,306.487 273.155,307.653 274.5,308.5C 274.887,306.269 275.053,303.936 275,301.5C 276.308,303.641 277.808,305.641 279.5,307.5C 278.37,308.622 277.703,309.956 277.5,311.5C 273.862,315.474 270.195,319.474 266.5,323.5C 265.178,323.33 264.011,323.663 263,324.5C 262.427,326.641 261.594,328.641 260.5,330.5C 259.732,331.263 259.232,332.263 259,333.5C 258.501,337.486 258.334,341.486 258.5,345.5C 260.503,352.506 263.837,358.839 268.5,364.5C 269.937,368.667 272.937,370.667 277.5,370.5C 279.117,371.038 280.784,371.371 282.5,371.5C 283.93,372.537 285.597,373.204 287.5,373.5C 288.531,374.249 289.698,374.915 291,375.5C 292.43,375.306 293.93,375.306 295.5,375.5C 297.026,375.006 298.359,374.339 299.5,373.5C 302.495,373.706 305.162,373.04 307.5,371.5C 308.833,371.5 310.167,371.5 311.5,371.5C 312.738,372.412 314.072,372.579 315.5,372C 313.014,371.295 313.014,370.462 315.5,369.5C 317.019,370.378 317.853,371.378 318,372.5C 318.772,372.355 319.439,372.022 320,371.5C 320.333,370.167 320.667,368.833 321,367.5C 321.816,368.823 322.983,369.489 324.5,369.5C 327.833,373.167 331.167,376.833 334.5,380.5C 335.906,383.414 337.906,385.914 340.5,388C 339.529,389.481 338.196,390.315 336.5,390.5C 333.829,391.166 331.329,391.166 329,390.5C 327.615,389.449 326.615,388.116 326,386.5C 325.909,388.661 325.076,390.661 323.5,392.5C 322.21,391.942 321.377,390.942 321,389.5C 318.845,390.683 316.845,390.35 315,388.5C 311.649,390.994 307.815,392.16 303.5,392C 304.956,392.423 305.456,393.256 305,394.5C 304,394.167 303,393.833 302,393.5C 300.322,394.466 299.655,395.799 300,397.5C 300.333,397.167 300.667,396.833 301,396.5C 302.785,397.24 304.618,397.907 306.5,398.5C 307.192,397.975 307.692,397.308 308,396.5C 308.374,397.416 308.874,398.25 309.5,399C 307.97,401.251 305.97,402.751 303.5,403.5C 298.167,403.5 292.833,403.5 287.5,403.5C 282.729,403.462 278.062,402.796 273.5,401.5C 272.791,400.596 271.791,400.263 270.5,400.5C 253.2,392.866 240.533,380.532 232.5,363.5C 231.978,360.432 231.145,357.432 230,354.5C 229.51,355.793 229.343,357.127 229.5,358.5C 226.654,350.65 225.987,342.65 227.5,334.5C 227.265,329.454 228.265,324.787 230.5,320.5C 230.343,321.873 230.51,323.207 231,324.5C 231.505,322.482 232.005,320.482 232.5,318.5C 234.341,314.817 236.674,311.484 239.5,308.5C 241.507,307.321 241.84,307.821 240.5,310C 241.275,311.23 242.275,311.563 243.5,311C 244.061,309.324 245.061,307.991 246.5,307C 244.061,306.467 243.395,305.3 244.5,303.5C 245.11,302.609 245.443,301.609 245.5,300.5C 246.833,299.5 248.167,298.5 249.5,297.5C 252.199,297.534 254.699,296.867 257,295.5C 257.743,297.645 258.576,297.811 259.5,296C 257.718,294.322 257.385,292.489 258.5,290.5C 259.086,290.709 259.586,291.043 260,291.5C 260.608,289.846 261.108,288.179 261.5,286.5C 262.94,283.455 265.274,281.955 268.5,282C 273,287.997 277.667,293.83 282.5,299.5 Z"/></g>
<g><path style="opacity:0.919" fill="#f2a75a" d="M 429.5,285.5 C 431.851,286.916 431.851,288.583 429.5,290.5C 429.5,289.833 429.5,289.167 429.5,288.5C 429.5,287.5 429.5,286.5 429.5,285.5 Z"/></g>
<g><path style="opacity:1" fill="#f4a955" d="M 461.5,298.5 C 460.814,307.554 458.148,315.887 453.5,323.5C 453.5,322.833 453.5,322.167 453.5,321.5C 455.463,315.105 457.13,308.605 458.5,302C 457.077,300.588 457.244,299.421 459,298.5C 460.163,282.514 460.996,282.514 461.5,298.5 Z"/></g>
<g><path style="opacity:0.42" fill="#f4a850" d="M 429.5,288.5 C 429.5,289.167 429.5,289.833 429.5,290.5C 411.833,290.5 394.167,290.5 376.5,290.5C 394.069,289.821 411.735,289.154 429.5,288.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa52" d="M 282.5,299.5 C 283.965,300.406 284.965,301.739 285.5,303.5C 283.146,306.521 280.479,309.188 277.5,311.5C 277.703,309.956 278.37,308.622 279.5,307.5C 277.808,305.641 276.308,303.641 275,301.5C 275.053,303.936 274.887,306.269 274.5,308.5C 273.155,307.653 272.155,306.487 271.5,305C 273.007,304.163 273.507,302.996 273,301.5C 271.307,302.184 269.807,303.184 268.5,304.5C 268.167,304.167 267.833,303.833 267.5,303.5C 268.929,301.045 270.262,298.545 271.5,296C 270.711,294.374 269.711,292.874 268.5,291.5C 269.492,291.646 270.658,291.313 272,290.5C 272.945,290.905 273.612,291.572 274,292.5C 274.034,294.18 274.201,295.68 274.5,297C 277.08,297.538 279.247,298.704 281,300.5C 281.765,300.43 282.265,300.097 282.5,299.5 Z"/></g>
<g><path style="opacity:0.984" fill="#f3a85a" d="M 376.5,290.5 C 394.167,290.5 411.833,290.5 429.5,290.5C 426.713,291.477 423.713,291.81 420.5,291.5C 407.167,291.5 393.833,291.5 380.5,291.5C 380.167,291.5 379.833,291.5 379.5,291.5C 378.182,294.258 377.515,297.424 377.5,301C 377.519,304.418 377.853,307.751 378.5,311C 389.833,311.333 401.167,311.667 412.5,312C 400.505,312.5 388.505,312.667 376.5,312.5C 375.26,305.444 375.26,298.11 376.5,290.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa52" d="M 379.5,291.5 C 379.163,296.205 378.83,301.205 378.5,306.5C 378.477,308.067 378.977,309.4 380,310.5C 380.333,308.833 380.667,307.167 381,305.5C 382.119,308.291 384.119,309.957 387,310.5C 390.108,309.669 389.941,308.836 386.5,308C 387.126,307.25 387.626,306.416 388,305.5C 389,306.833 390,306.833 391,305.5C 391.684,306.784 391.517,307.951 390.5,309C 393.249,309.606 395.749,310.106 398,310.5C 400.179,309.884 402.012,308.717 403.5,307C 402.624,305.415 401.291,304.415 399.5,304C 401.101,303.727 402.601,303.227 404,302.5C 404.98,304.259 405.647,305.926 406,307.5C 408,306.833 410,306.167 412,305.5C 412.456,306.744 411.956,307.577 410.5,308C 413.167,308.667 413.167,309.333 410.5,310C 411.784,310.684 412.951,310.517 414,309.5C 417.096,310.738 419.596,311.738 421.5,312.5C 420.833,312.5 420.5,312.833 420.5,313.5C 405.657,313.829 390.99,313.496 376.5,312.5C 388.505,312.667 400.505,312.5 412.5,312C 401.167,311.667 389.833,311.333 378.5,311C 377.853,307.751 377.519,304.418 377.5,301C 377.515,297.424 378.182,294.258 379.5,291.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 380.5,291.5 C 393.833,291.5 407.167,291.5 420.5,291.5C 419.828,292.267 418.995,292.934 418,293.5C 416.951,292.483 415.784,292.316 414.5,293C 413.167,293.667 413.167,294.333 414.5,295C 409.48,295.256 404.647,296.09 400,297.5C 398.5,297.167 397,296.833 395.5,296.5C 395.667,296.167 395.833,295.833 396,295.5C 397.726,296.576 399.559,296.743 401.5,296C 400.542,294.853 400.875,293.853 402.5,293C 398.833,292.333 395.167,292.333 391.5,293C 392.253,294.487 393.086,294.654 394,293.5C 394.492,294.549 394.326,295.549 393.5,296.5C 391.653,297.83 390.153,297.497 389,295.5C 388.072,297.307 386.906,298.974 385.5,300.5C 386.911,302.017 386.744,303.351 385,304.5C 382.889,302.172 382.055,299.672 382.5,297C 384.997,296.588 386.997,295.422 388.5,293.5C 385.915,293.241 383.248,292.575 380.5,291.5 Z"/></g>
<g><path style="opacity:0.964" fill="#f3a75a" d="M 137.5,299.5 C 137.5,301.833 137.5,304.167 137.5,306.5C 137.167,306.5 136.833,306.5 136.5,306.5C 135.612,303.946 135.279,301.279 135.5,298.5C 135.34,296.801 135.506,295.134 136,293.5C 136.191,295.708 136.691,297.708 137.5,299.5 Z"/></g>
<g><path style="opacity:0.954" fill="#f3a757" d="M 220.5,238.5 C 221.5,238.5 222.5,238.5 223.5,238.5C 233.03,239.268 241.364,242.768 248.5,249C 258.326,261.322 268.659,273.156 279.5,284.5C 280.5,286.167 281.833,287.5 283.5,288.5C 284.072,290.255 284.906,291.922 286,293.5C 297.755,307.378 309.255,321.378 320.5,335.5C 319.5,334.833 318.5,334.167 317.5,333.5C 294.073,305.564 270.406,277.731 246.5,250C 238.616,244.221 229.949,240.388 220.5,238.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa53" d="M 330.5,298.5 C 331.764,300.27 333.264,301.937 335,303.5C 335.464,302.906 335.631,302.239 335.5,301.5C 337.587,302.585 338.92,304.251 339.5,306.5C 338.075,304.969 337.409,305.302 337.5,307.5C 336,305.821 334.167,304.488 332,303.5C 330.991,301.975 330.491,300.308 330.5,298.5 Z"/></g>
<g><path style="opacity:0.984" fill="#f2a85c" d="M 245.5,300.5 C 245.443,301.609 245.11,302.609 244.5,303.5C 243.833,303.5 243.167,303.5 242.5,303.5C 243.167,302.167 244.167,301.167 245.5,300.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 248.5,300.5 C 250.394,301.048 252.06,302.048 253.5,303.5C 254.954,305.263 254.62,306.597 252.5,307.5C 250.266,305.619 248.933,303.285 248.5,300.5 Z"/></g>
<g><path style="opacity:0.978" fill="#f3a858" d="M 268.5,323.5 C 267.833,323.5 267.167,323.5 266.5,323.5C 270.195,319.474 273.862,315.474 277.5,311.5C 280.479,309.188 283.146,306.521 285.5,303.5C 284.965,301.739 283.965,300.406 282.5,299.5C 277.667,293.83 273,287.997 268.5,282C 265.274,281.955 262.94,283.455 261.5,286.5C 257.5,290.167 253.5,293.833 249.5,297.5C 248.167,298.5 246.833,299.5 245.5,300.5C 245.5,300.167 245.5,299.833 245.5,299.5C 251.964,292.535 258.631,285.702 265.5,279C 268.093,279.546 270.26,281.046 272,283.5C 278.066,289.73 283.566,296.396 288.5,303.5C 282.146,310.521 275.479,317.188 268.5,323.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 261.5,286.5 C 261.108,288.179 260.608,289.846 260,291.5C 259.586,291.043 259.086,290.709 258.5,290.5C 257.385,292.489 257.718,294.322 259.5,296C 258.576,297.811 257.743,297.645 257,295.5C 254.699,296.867 252.199,297.534 249.5,297.5C 253.5,293.833 257.5,290.167 261.5,286.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa52" d="M 242.5,303.5 C 243.167,303.5 243.833,303.5 244.5,303.5C 243.395,305.3 244.061,306.467 246.5,307C 245.061,307.991 244.061,309.324 243.5,311C 242.275,311.563 241.275,311.23 240.5,310C 241.84,307.821 241.507,307.321 239.5,308.5C 239.5,307.833 239.5,307.167 239.5,306.5C 241.144,306.19 242.144,305.19 242.5,303.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f4a854" d="M 245.5,299.5 C 245.5,299.833 245.5,300.167 245.5,300.5C 244.167,301.167 243.167,302.167 242.5,303.5C 242.144,305.19 241.144,306.19 239.5,306.5C 239.167,306.5 238.833,306.5 238.5,306.5C 239.833,303.167 242.167,300.833 245.5,299.5 Z"/></g>
<g><path style="opacity:0.188" fill="#f3a854" d="M 136.5,306.5 C 136.833,306.5 137.167,306.5 137.5,306.5C 138.924,308.515 139.59,310.848 139.5,313.5C 139.167,313.5 138.833,313.5 138.5,313.5C 137.076,311.485 136.41,309.152 136.5,306.5 Z"/></g>
<g><path style="opacity:0.943" fill="#f3a759" d="M 238.5,306.5 C 238.833,306.5 239.167,306.5 239.5,306.5C 239.5,307.167 239.5,307.833 239.5,308.5C 236.674,311.484 234.341,314.817 232.5,318.5C 232.5,317.5 232.5,316.5 232.5,315.5C 233.723,311.951 235.723,308.951 238.5,306.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f2a75c" d="M 140.5,315.5 C 142.625,318.088 143.958,321.088 144.5,324.5C 143.167,322.5 141.833,320.5 140.5,318.5C 140.5,317.5 140.5,316.5 140.5,315.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f4a852" d="M 138.5,313.5 C 138.833,313.5 139.167,313.5 139.5,313.5C 140.338,313.842 140.672,314.508 140.5,315.5C 140.5,316.5 140.5,317.5 140.5,318.5C 139.069,317.22 138.402,315.553 138.5,313.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f3a855" d="M 232.5,315.5 C 232.5,316.5 232.5,317.5 232.5,318.5C 232.005,320.482 231.505,322.482 231,324.5C 230.51,323.207 230.343,321.873 230.5,320.5C 230.402,318.447 231.069,316.78 232.5,315.5 Z"/></g>
<g><path style="opacity:0.342" fill="#f4a851" d="M 140.5,318.5 C 141.833,320.5 143.167,322.5 144.5,324.5C 145.338,324.842 145.672,325.508 145.5,326.5C 145.5,327.167 145.5,327.833 145.5,328.5C 142.793,325.753 141.127,322.42 140.5,318.5 Z"/></g>
<g><path style="opacity:0.927" fill="#f3a758" d="M 421.5,312.5 C 416.783,323.538 408.45,330.204 396.5,332.5C 396.5,332.167 396.5,331.833 396.5,331.5C 406.459,328.22 414.459,322.22 420.5,313.5C 420.5,312.833 420.833,312.5 421.5,312.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a854" d="M 167.5,294.5 C 167.833,294.5 168.167,294.5 168.5,294.5C 171.449,307.063 177.949,317.397 188,325.5C 188.667,337.5 188.667,349.5 188,361.5C 186.708,362.791 185.542,362.791 184.5,361.5C 185.492,361.672 186.158,361.338 186.5,360.5C 186.433,349.499 186.433,338.666 186.5,328C 186.22,326.605 185.553,325.438 184.5,324.5C 176.571,318.312 171.071,310.312 168,300.5C 167.505,298.527 167.338,296.527 167.5,294.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f4a854" d="M 266.5,323.5 C 267.167,323.5 267.833,323.5 268.5,323.5C 264.959,326.681 262.293,330.348 260.5,334.5C 260.5,333.167 260.5,331.833 260.5,330.5C 261.594,328.641 262.427,326.641 263,324.5C 264.011,323.663 265.178,323.33 266.5,323.5 Z"/></g>
<g><path style="opacity:0.95" fill="#f2a75c" d="M 227.5,334.5 C 228.309,332.708 228.809,330.708 229,328.5C 229.167,329.667 229.333,330.833 229.5,332C 228.547,339.165 228.38,346.331 229,353.5C 227.812,347.222 227.312,340.888 227.5,334.5 Z"/></g>
<g><path style="opacity:0.908" fill="#f2a758" d="M 339.5,306.5 C 344.564,313.071 350.231,319.237 356.5,325C 360.581,327.707 364.914,329.874 369.5,331.5C 369.5,331.833 369.5,332.167 369.5,332.5C 363.807,330.821 358.474,328.321 353.5,325C 348.301,318.971 342.967,313.138 337.5,307.5C 337.409,305.302 338.075,304.969 339.5,306.5 Z"/></g>
<g><path style="opacity:0.959" fill="#f3a759" d="M 453.5,321.5 C 453.5,322.167 453.5,322.833 453.5,323.5C 450.89,328.767 447.89,333.767 444.5,338.5C 443.624,338.631 442.957,338.298 442.5,337.5C 444.278,335.736 445.611,333.736 446.5,331.5C 449.337,328.482 451.671,325.149 453.5,321.5 Z"/></g>
<g><path style="opacity:0.965" fill="#f2a75c" d="M 260.5,330.5 C 260.5,331.833 260.5,333.167 260.5,334.5C 259.833,338.167 259.167,341.833 258.5,345.5C 258.334,341.486 258.501,337.486 259,333.5C 259.232,332.263 259.732,331.263 260.5,330.5 Z"/></g>
<g><path style="opacity:1" fill="#f6aa53" d="M 446.5,331.5 C 445.611,333.736 444.278,335.736 442.5,337.5C 442.957,338.298 443.624,338.631 444.5,338.5C 443.833,339.833 442.833,340.833 441.5,341.5C 441.5,340.833 441.5,340.167 441.5,339.5C 441.36,334.986 443.027,332.319 446.5,331.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 192.5,332.5 C 193.19,337.233 193.856,342.066 194.5,347C 193.915,348.302 193.249,349.469 192.5,350.5C 192.5,344.5 192.5,338.5 192.5,332.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f4a850" d="M 317.5,333.5 C 318.5,334.167 319.5,334.833 320.5,335.5C 320.5,336.167 320.5,336.833 320.5,337.5C 318.738,336.738 317.738,335.404 317.5,333.5 Z"/></g>
<g><path style="opacity:0.627" fill="#f3a854" d="M 369.5,331.5 C 374.17,332.072 378.837,332.739 383.5,333.5C 387.827,332.723 392.16,332.056 396.5,331.5C 396.5,331.833 396.5,332.167 396.5,332.5C 395.791,333.404 394.791,333.737 393.5,333.5C 388.518,334.053 383.518,334.387 378.5,334.5C 375.171,334.785 372.171,334.118 369.5,332.5C 369.5,332.167 369.5,331.833 369.5,331.5 Z"/></g>
<g><path style="opacity:0.965" fill="#f2a75c" d="M 393.5,333.5 C 388.579,335.493 383.579,335.826 378.5,334.5C 383.518,334.387 388.518,334.053 393.5,333.5 Z"/></g>
<g><path style="opacity:0.927" fill="#f2a758" d="M 320.5,335.5 C 332.502,350.142 347.835,359.475 366.5,363.5C 365.791,364.404 364.791,364.737 363.5,364.5C 354.724,362.771 346.724,359.438 339.5,354.5C 339.027,353.094 338.027,352.427 336.5,352.5C 330.485,348.149 325.151,343.149 320.5,337.5C 320.5,336.833 320.5,336.167 320.5,335.5 Z"/></g>
<g><path style="opacity:0.962" fill="#f3a758" d="M 145.5,326.5 C 155.54,342.207 169.207,353.54 186.5,360.5C 186.158,361.338 185.492,361.672 184.5,361.5C 167.554,355.225 154.554,344.225 145.5,328.5C 145.5,327.833 145.5,327.167 145.5,326.5 Z"/></g>
<g><path style="opacity:0.188" fill="#f4a84f" d="M 336.5,352.5 C 338.027,352.427 339.027,353.094 339.5,354.5C 337.973,354.573 336.973,353.906 336.5,352.5 Z"/></g>
<g><path style="opacity:0.342" fill="#f3a855" d="M 232.5,363.5 C 232.5,364.5 232.5,365.5 232.5,366.5C 230.733,364.208 229.733,361.542 229.5,358.5C 229.343,357.127 229.51,355.793 230,354.5C 231.145,357.432 231.978,360.432 232.5,363.5 Z"/></g>
<g><path style="opacity:0.944" fill="#f3a756" d="M 260.5,334.5 C 259.729,352.647 267.729,364.98 284.5,371.5C 283.833,371.5 283.167,371.5 282.5,371.5C 280.784,371.371 279.117,371.038 277.5,370.5C 274.365,368.761 271.365,366.761 268.5,364.5C 263.837,358.839 260.503,352.506 258.5,345.5C 259.167,341.833 259.833,338.167 260.5,334.5 Z"/></g>
<g><path style="opacity:0.941" fill="#f3a758" d="M 441.5,339.5 C 441.5,340.167 441.5,340.833 441.5,341.5C 430.925,353.793 417.592,361.459 401.5,364.5C 400.167,364.5 398.833,364.5 397.5,364.5C 414.543,360.481 429.209,352.147 441.5,339.5 Z"/></g>
<g><path style="opacity:1" fill="#f5aa52" d="M 374.5,364.5 C 372.473,364.338 370.473,364.505 368.5,365C 369.737,365.232 370.737,365.732 371.5,366.5C 368.572,366.435 365.905,365.768 363.5,364.5C 364.791,364.737 365.791,364.404 366.5,363.5C 368.792,363.756 370.959,363.423 373,362.5C 373.717,363.044 374.217,363.711 374.5,364.5 Z"/></g>
<g><path style="opacity:1" fill="#f5a954" d="M 397.5,364.5 C 398.833,364.5 400.167,364.5 401.5,364.5C 398.124,366.082 394.458,366.749 390.5,366.5C 385.167,365.833 379.833,365.167 374.5,364.5C 379.322,365.065 383.822,364.399 388,362.5C 390.904,364.227 394.07,364.893 397.5,364.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 192.5,363.5 C 193.21,365.893 193.877,368.393 194.5,371C 193.849,378.266 193.182,385.432 192.5,392.5C 192.5,382.833 192.5,373.167 192.5,363.5 Z"/></g>
<g><path style="opacity:0.265" fill="#f4a850" d="M 320.5,364.5 C 322.709,363.024 324.042,363.691 324.5,366.5C 323.395,365.4 322.062,364.733 320.5,364.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 268.5,364.5 C 271.365,366.761 274.365,368.761 277.5,370.5C 272.937,370.667 269.937,368.667 268.5,364.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 324.5,369.5 C 322.983,369.489 321.816,368.823 321,367.5C 320.667,368.833 320.333,370.167 320,371.5C 319.439,372.022 318.772,372.355 318,372.5C 317.853,371.378 317.019,370.378 315.5,369.5C 316.167,368.833 316.833,368.167 317.5,367.5C 319.017,367.489 320.184,366.823 321,365.5C 322.376,366.705 323.542,368.038 324.5,369.5 Z"/></g>
<g><path style="opacity:0.893" fill="#f2a757" d="M 374.5,364.5 C 379.833,365.167 385.167,365.833 390.5,366.5C 384.309,367.726 377.976,367.726 371.5,366.5C 370.737,365.732 369.737,365.232 368.5,365C 370.473,364.505 372.473,364.338 374.5,364.5 Z"/></g>
<g><path style="opacity:0.304" fill="#f4a953" d="M 318.5,365.5 C 318.167,366.167 317.833,366.833 317.5,367.5C 316.833,368.167 316.167,368.833 315.5,369.5C 313.014,370.462 313.014,371.295 315.5,372C 314.072,372.579 312.738,372.412 311.5,371.5C 313.031,370.075 312.698,369.409 310.5,369.5C 312.849,367.659 315.515,366.326 318.5,365.5 Z"/></g>
<g><path style="opacity:0.908" fill="#f2a757" d="M 310.5,369.5 C 312.698,369.409 313.031,370.075 311.5,371.5C 310.167,371.5 308.833,371.5 307.5,371.5C 306.5,371.5 305.5,371.5 304.5,371.5C 306.214,370.262 308.214,369.595 310.5,369.5 Z"/></g>
<g><path style="opacity:0.905" fill="#f2a759" d="M 282.5,371.5 C 283.167,371.5 283.833,371.5 284.5,371.5C 291.172,372.774 297.839,372.774 304.5,371.5C 305.5,371.5 306.5,371.5 307.5,371.5C 305.162,373.04 302.495,373.706 299.5,373.5C 295.5,373.5 291.5,373.5 287.5,373.5C 285.597,373.204 283.93,372.537 282.5,371.5 Z"/></g>
<g><path style="opacity:0.933" fill="#f2a759" d="M 320.5,364.5 C 322.062,364.733 323.395,365.4 324.5,366.5C 327.823,370.46 331.156,374.46 334.5,378.5C 334.5,379.167 334.5,379.833 334.5,380.5C 331.167,376.833 327.833,373.167 324.5,369.5C 323.542,368.038 322.376,366.705 321,365.5C 320.184,366.823 319.017,367.489 317.5,367.5C 317.833,366.833 318.167,366.167 318.5,365.5C 318.842,364.662 319.508,364.328 320.5,364.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 287.5,373.5 C 291.5,373.5 295.5,373.5 299.5,373.5C 298.359,374.339 297.026,375.006 295.5,375.5C 293.93,375.306 292.43,375.306 291,375.5C 289.698,374.915 288.531,374.249 287.5,373.5 Z"/></g>
<g><path style="opacity:0.912" fill="#f2a758" d="M 232.5,363.5 C 240.533,380.532 253.2,392.866 270.5,400.5C 269.5,400.5 268.5,400.5 267.5,400.5C 266.486,399.326 265.153,398.66 263.5,398.5C 249.108,391.775 238.775,381.108 232.5,366.5C 232.5,365.5 232.5,364.5 232.5,363.5 Z"/></g>
<g><path style="opacity:1" fill="#f6ab52" d="M 214.5,383.5 C 214.5,387.5 214.5,391.5 214.5,395.5C 213.348,394.166 212.348,392.666 211.5,391C 212.824,388.506 213.824,386.006 214.5,383.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa52" d="M 336.5,390.5 C 332.443,393.194 328.11,395.527 323.5,397.5C 324.574,396.115 325.907,394.949 327.5,394C 326.255,393.209 324.922,392.709 323.5,392.5C 325.076,390.661 325.909,388.661 326,386.5C 326.615,388.116 327.615,389.449 329,390.5C 331.329,391.166 333.829,391.166 336.5,390.5 Z"/></g>
<g><path style="opacity:0.984" fill="#f3a857" d="M 334.5,378.5 C 336.65,380.76 338.817,383.093 341,385.5C 341.982,386.759 342.315,388.092 342,389.5C 336.295,393.768 330.128,397.101 323.5,399.5C 323.5,399.167 323.5,398.833 323.5,398.5C 323.5,398.167 323.5,397.833 323.5,397.5C 328.11,395.527 332.443,393.194 336.5,390.5C 338.196,390.315 339.529,389.481 340.5,388C 337.906,385.914 335.906,383.414 334.5,380.5C 334.5,379.833 334.5,379.167 334.5,378.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa52" d="M 323.5,392.5 C 322.746,394.505 321.579,395.172 320,394.5C 318.513,395.253 318.346,396.086 319.5,397C 318.747,398.487 317.914,398.654 317,397.5C 316.308,398.437 316.475,399.103 317.5,399.5C 314.167,400.833 310.833,402.167 307.5,403.5C 306.167,403.5 304.833,403.5 303.5,403.5C 305.97,402.751 307.97,401.251 309.5,399C 308.874,398.25 308.374,397.416 308,396.5C 307.692,397.308 307.192,397.975 306.5,398.5C 304.618,397.907 302.785,397.24 301,396.5C 300.667,396.833 300.333,397.167 300,397.5C 299.655,395.799 300.322,394.466 302,393.5C 303,393.833 304,394.167 305,394.5C 305.456,393.256 304.956,392.423 303.5,392C 307.815,392.16 311.649,390.994 315,388.5C 316.845,390.35 318.845,390.683 321,389.5C 321.377,390.942 322.21,391.942 323.5,392.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa4e" d="M 323.5,392.5 C 324.922,392.709 326.255,393.209 327.5,394C 325.907,394.949 324.574,396.115 323.5,397.5C 323.5,397.833 323.5,398.167 323.5,398.5C 321.5,398.833 319.5,399.167 317.5,399.5C 316.475,399.103 316.308,398.437 317,397.5C 317.914,398.654 318.747,398.487 319.5,397C 318.346,396.086 318.513,395.253 320,394.5C 321.579,395.172 322.746,394.505 323.5,392.5 Z"/></g>
<g><path style="opacity:1" fill="#f7aa52" d="M 206.5,399.5 C 203.064,400.782 199.731,400.782 196.5,399.5C 199.187,399.664 201.854,399.497 204.5,399C 203.833,398.667 203.167,398.333 202.5,398C 208.295,395.924 208.629,393.591 203.5,391C 206.271,388.577 208.271,389.077 209.5,392.5C 208.68,394.974 207.68,397.307 206.5,399.5 Z"/></g>
<g><path style="opacity:0.946" fill="#f3a758" d="M 323.5,398.5 C 323.5,398.833 323.5,399.167 323.5,399.5C 319.288,402.056 314.622,403.39 309.5,403.5C 308.833,403.5 308.167,403.5 307.5,403.5C 310.833,402.167 314.167,400.833 317.5,399.5C 319.5,399.167 321.5,398.833 323.5,398.5 Z"/></g>
<g><path style="opacity:0.265" fill="#f4a84f" d="M 263.5,398.5 C 265.153,398.66 266.486,399.326 267.5,400.5C 265.62,400.771 264.287,400.104 263.5,398.5 Z"/></g>
<g><path style="opacity:0.265" fill="#f4a853" d="M 267.5,400.5 C 268.5,400.5 269.5,400.5 270.5,400.5C 271.791,400.263 272.791,400.596 273.5,401.5C 273.5,401.833 273.5,402.167 273.5,402.5C 271.102,402.741 269.102,402.074 267.5,400.5 Z"/></g>
<g><path style="opacity:0.965" fill="#f3a75a" d="M 273.5,402.5 C 273.5,402.167 273.5,401.833 273.5,401.5C 278.062,402.796 282.729,403.462 287.5,403.5C 286.791,404.404 285.791,404.737 284.5,404.5C 280.665,404.583 276.998,403.917 273.5,402.5 Z"/></g>
<g><path style="opacity:1" fill="#f4a856" d="M 287.5,403.5 C 292.833,403.5 298.167,403.5 303.5,403.5C 304.833,403.5 306.167,403.5 307.5,403.5C 308.167,403.5 308.833,403.5 309.5,403.5C 304.577,404.954 299.411,405.621 294,405.5C 290.648,405.498 287.482,405.165 284.5,404.5C 285.791,404.737 286.791,404.404 287.5,403.5 Z"/></g>
</svg>
<h1>
    Ishnamel's Character <a href="https://github.com/Ishnamel/Ishnamel-Character-Generator/tree/unstable" target="_blank" style="color: #d8c7a7; text-decoration: none; font-size: 70px;">Generator</a>
</h1>

<h5>v.17</h5> 
<button onclick="window.location.href = 'characterDisplay.html';">View Characters</button>
<button onclick="navigateToBattleSimulator()">Battle Simulator</button>
<button onclick="randomizeAndUpdate()">Generate</button>
<button onclick="generateNarrative()">Generate Narrative</button>
<button onclick="exportStatus()">Download</button>
<h3 for="generateTimes">Generate Multiple: </label>
<input type="number" id="generateTimes" value="100" min="1" step="1" style="width: 300px;">
<button onclick="generateMultipleTimesFromInput()">Generate</button>
    <h2>Character Info</h2>
    <label for="firstName">First Name:</label><input type="text" id="firstName" disabled oninput="resizeInput(this)"><button onclick="toggleLock('firstName')">Lock</button><br>
    <label for="lastName">Last Name:</label><input type="text" id="lastName" disabled oninput="resizeInput(this)"><button onclick="toggleLock('lastName')">Lock</button><br>

    <h2>General Status</h2>
    
<h3>Attributes</h3>
<label><strong>Potential:</strong> <span id="potentialDisplay">Total: 40 (F)</span></label>
<label for="strength">Strength:</label>
<input type="number" id="strength" value="8" disabled oninput="resizeInput(this)"><button onclick="toggleLock('strength')">Lock</button><span id="strengthRating">F</span><br>

<label for="constitution">Constitution:</label>
<input type="number" id="constitution" value="10" disabled oninput="resizeInput(this)"><button onclick="toggleLock('constitution')">Lock</button><span id="constitutionRating">F</span><br>

<label for="dexterity">Dexterity:</label>
<input type="number" id="dexterity" value="10" disabled oninput="resizeInput(this)"><button onclick="toggleLock('dexterity')">Lock</button><span id="dexterityRating">F</span><br>

<label for="intelligence">Intelligence:</label>
<input type="number" id="intelligence" value="7" disabled oninput="resizeInput(this)"><button onclick="toggleLock('intelligence')">Lock</button><span id="intelligenceRating">F</span><br>

<label for="resolve">Resolve:</label>
<input type="number" id="resolve" value="10" disabled oninput="resizeInput(this)"><button onclick="toggleLock('resolve')">Lock</button><span id="resolveRating">F</span><br>

<label for="perception">Perception:</label>
<input type="number" id="perception" value="10" disabled oninput="resizeInput(this)"><button onclick="toggleLock('perception')">Lock</button><span id="perceptionRating">F</span><br>
	
	<h2>Appearance</h2>
	<label for="bloodType">Blood Type:</label>
<input type="text" id="bloodType" value="" disabled oninput>
</select><button onclick="toggleLock('bloodType')">Lock</button><br>

<label for="skinColor">Skin Color:</label>
<input type="text" id="skinColor" value="Fair" disabled oninput>
<button onclick="toggleLock('skinColor')">Lock</button><br>

<label for="leftEyeColor">Left Eye Color:</label>
<input type="text" id="leftEyeColor" value="Brown" disabled oninput>
<button onclick="toggleLock('leftEyeColor')">Lock</button><br>

<label for="rightEyeColor">Right Eye Color:</label>
<input type="text" id="rightEyeColor" value="Brown" disabled oninput>
<button onclick="toggleLock('rightEyeColor')">Lock</button><br>

<label for="hairColor">Hair Color:</label>
<input type="text" id="hairColor" value="Black" disabled oninput>
<button onclick="toggleLock('hairColor')">Lock</button><br>

<label for="hairStyle">Hair Style:</label>
<input type="text" id="hairStyle" value="Short" disabled oninput>
<button onclick="toggleLock('hairStyle')">Lock</button><br>

<label for="race">Race:</label>
<input type="text" id="race" disabled>
<p id="appearanceTraits">Race Traits: None</p>
<h2>Physical Characteristics</h2>

<!-- Height (in feet and inches) -->
<label for="height">Height:</label>
<input type="text" id="height" disabled value="5 feet 5 inches" disabled oninput>
<button onclick="randomizeHWBMI()">Randomize Height and Weight</button><br>

<!-- Weight (in kg) -->
<label for="weight">Weight:</label>
<input type="text" id="weight" disabled value="68 kg" disabled oninput>

<label for="bmi" id="bmi">BMI: </label><br>

<!-- Body Build Label -->
<label for="bodyBuild" id="bodyBuild">Body Build: </label><br>


    <h2>Conditions</h2>
    <label for="pain">Pain:</label><input type="text" id="pain" value="0" disabled oninput="resizeInput(this)"><button onclick="toggleLock('pain')">Lock</button><br>
    <label for="thirst">Thirst:</label><input type="text" id="thirst" value="nothing" disabled oninput="resizeInput(this)"><button onclick="toggleLock('thirst')">Lock</button><br>
    <label for="rest">Rest:</label><input type="text" id="rest" value="nothing" disabled oninput="resizeInput(this)"><button onclick="toggleLock('rest')">Lock</button><br>
    <label for="hunger">Hunger:</label><input type="text" id="hunger" value="nothing" disabled oninput="resizeInput(this)"><button onclick="toggleLock('hunger')">Lock</button><br>
    <label for="heat">Heat:</label><input type="text" id="heat" value="Comfortable" disabled oninput="resizeInput(this)"><button onclick="toggleLock('heat')">Lock</button><br>



    <h2>Environment</h2>
    <label for="place">Place:</label><input type="text" id="place" value="evac shelter" disabled oninput="resizeInput(this)"><button onclick="toggleLock('place')">Lock</button><br>
    <label for="lighting">Lighting:</label><input type="text" id="lighting" value="bright" disabled oninput="resizeInput(this)"><button onclick="toggleLock('lighting')">Lock</button><br>
    <label for="weather">Weather:</label><input type="text" id="weather" value="Clear" disabled oninput="resizeInput(this)"><button onclick="toggleLock('weather')">Lock</button><br>
    <label for="moon">Moon:</label><input type="text" id="moon" value="New moon" disabled oninput="resizeInput(this)"><button onclick="toggleLock('moon')">Lock</button><br>
    <label for="date">Date:</label><input type="text" id="date" value="Spring, day 61" disabled oninput="resizeInput(this)"><button onclick="toggleLock('date')">Lock</button><br>
    <label for="time">Time:</label><input type="text" id="time" value="8:00:36 AM" disabled oninput="resizeInput(this)"><button onclick="toggleLock('time')">Lock</button><br>
    <label for="wind">Wind:</label><input type="text" id="wind" value="Calm" disabled oninput="resizeInput(this)"><button onclick="toggleLock('wind')">Lock</button><br>
    <label for="temperature">Temperature:</label><input type="text" id="temperature" value="C-41 F" disabled oninput="resizeInput(this)"><button onclick="toggleLock('temperature')">Lock</button><br>



    <h2>Combat</h2>
    <label for="wieldLHand">Main Hand:</label><input type="text" id="wieldLHand" value="fists" disabled oninput="resizeInput(this)"><br>
    <label for="wieldRHand">OffHand:</label><input type="text" id="wieldRHand" value="fists" disabled oninput="resizeInput(this)"><br>
    <label for="combatClass">Combat Class:</label>
    <input type="text" id="combatClass" value="nothing" disabled disabled oninput="resizeInput(this)">
    <button onclick="toggleLock('combatClass')">Lock</button><br>

    <label for="combatStyle">Combat Style:</label>
    <input type="text" id="combatStyle" value="No style" disabled oninput="resizeInput(this)">
    <button onclick="toggleLock('combatStyle')">Lock</button><br>

    <label for="combatTechnique">Combat Technique:</label>
    <input type="text" id="combatTechnique" value="nothing" disabled disabled oninput="resizeInput(this)">
    <button onclick="toggleLock('combatTechnique')">Lock</button><br>
</div>


<div id="sideStatus" class="status-side-section" style="display: none;"></div>
<!-- Hidden Span for measuring text width -->
<span id="measurementSpan" class="input-measurement"></span>
<div class="right-panel">
        <div id="statusTop"></div>
        <div id="statusDisplay"></div>
  <div id="statusBottom"></div>

  <button id="mobileButton" onclick="randomizeAndUpdate()">Generate</button>
 <h2 onclick="toggleCharacterList()" style="cursor: pointer;">Saved Characters ▼</h2>
<div id="characterListContainer" style="display: none; overflow: hidden; transition: max-height 0.5s ease;">
   <input
       type="text"
       id="searchInput"
       placeholder="Search characters by name..."
       oninput="filterCharacterList()"
       style="width: 100%; padding: 10px; font-size: 50px; margin-bottom: 10px;"
   />
   
   <table id="characterList">
        <thead>
            <tr>
				<th onclick="sortCharacterListByNumber()" style="cursor: pointer;">
    # ▲▼
</th>

               <th onclick="sortCharacterListAlphabetically()" style="cursor: pointer;">
    Name ▲▼
</th>
			 <th>Race</th>
			<th onclick="sortCharacterListByPotential()" style="cursor: pointer;">
                   Potential ▲▼
               </th>
                <th>Combat Class</th>
                <th>Emblem</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dynamic rows will be added here -->
        </tbody>
    </table>
	
</div>
 <button id="scrollToTopBtn" onclick="scrollToTop()" >↑ Scroll to Top</button>
    </div>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>


<script>
const request = indexedDB.open("characterDatabase", 2); // Open or create the database

request.onupgradeneeded = function(event) {
    const db = event.target.result;
    if (!db.objectStoreNames.contains("characters")) {
        db.createObjectStore("characters", { keyPath: "key" }); // Create 'characters' store
        console.log("Object store 'characters' created.");
    }
};

request.onsuccess = function(event) {
    console.log("IndexedDB opened successfully.");
};

request.onerror = function(event) {
    console.error("Error opening IndexedDB:", event.target.error);
};

// Listen for keydown events
    document.addEventListener('keydown', function(event) {
        // Check if the spacebar (keyCode 32) is pressed
        if (event.code === 'Space') {
            // Prevent the default behavior of the spacebar (scrolling)
            event.preventDefault();
            // Trigger the "Generate" button
            document.querySelector('button[onclick="randomizeAndUpdate()"]').click();
        }
    });
    function isMobileDevice() {
    return /Mobi|Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);
  }

  window.onload = function () {
    const mobileButton = document.getElementById('mobileButton');
    if (isMobileDevice()) {
      mobileButton.style.display = 'block';
      mobileButton.style.fontSize = '75px';       // Bigger text
      mobileButton.style.padding = '15px 30px';   // More padding
      mobileButton.style.width = '90%';           // Wide button
      mobileButton.style.margin = '10px auto';    // Centered horizontally
    }
  };
// Function to scroll to the top of the right panel
function scrollToTop() {
    const rightPanel = document.querySelector('.right-panel'); // Target the right panel
    rightPanel.scrollTo({
        top: 0,
        behavior: 'smooth'  // Smooth scrolling
    });
}


  
// Function to resize input based on content length
function resizeInput(input) {
    const measurementSpan = document.getElementById('measurementSpan');
    
    // Set the span text to match the input's current value
    measurementSpan.textContent = input.value;

    // Get the styles of the input field to include padding and borders
    const inputStyles = window.getComputedStyle(input);
    const paddingLeft = parseInt(inputStyles.paddingLeft, 10);
    const paddingRight = parseInt(inputStyles.paddingRight, 10);
    const borderLeft = parseInt(inputStyles.borderLeftWidth, 10);
    const borderRight = parseInt(inputStyles.borderRightWidth, 10);

    // Set the width of the input box to match the width of the span + padding and borders
    input.style.width = `${measurementSpan.offsetWidth + paddingLeft + paddingRight + borderLeft + borderRight + 20}px`; // Adding extra space for padding
}

// Function to resize all inputs
function resizeAllInputs() {
    const inputs = document.querySelectorAll('input[type="text"], input[type="number"]');
    inputs.forEach(resizeInput);
    function toggleSideStatus() {
    const sideStatusElement = document.getElementById('sideStatus');
    if (sideStatusElement.style.display === 'none') {
        sideStatusElement.style.display = 'block';
    } else {
        sideStatusElement.style.display = 'none';
    }
}
}

function toggleSideStatus() {
    const sideStatusElement = document.getElementById('sideStatus');
    if (sideStatusElement.style.display === 'none') {
        sideStatusElement.style.display = 'block';
    } else {
        sideStatusElement.style.display = 'none';
    }
}
    // Seeded random number generator
    function seededRandom(seed) {
        let x = Math.sin(seed) * 10000;
        return x - Math.floor(x);
    }

    // Generate random colors based on a seed
    function getRandomColor(seed, index) {
        const seededValue = seededRandom(seed + index);
        return `#${Math.floor(seededValue * 16777215).toString(16).padStart(6, "0")}`;
    }
   
const pixelSize = 16;
    // Generate symmetrical random pixel art with a main color and two sub-colors
    function generateSymmetricalPixelArt(seed, width, height, pixelSize) {
    const canvas = document.createElement("canvas");
    canvas.width = width*pixelSize;
    canvas.height = height*pixelSize;
    
    const ctx = canvas.getContext("2d");

    // Use the seed to generate consistent colors
    const mainColor = getRandomColor(seed, 1);
    const subColor1 = getRandomColor(seed, 2);
    const subColor2 = getRandomColor(seed, 3);

    // Random chance to mirror vertically (50% chance)
    const shouldMirrorVertically = seededRandom(seed + height) > 0.5;

    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width / 2; x++) {
            // Use the seed to create a deterministic random pattern
            const seededValue = seededRandom(seed + y * width + x);

          // Calculate distance from the center of the canvas
            const distFromCenterX = Math.abs((width / 2) - x);
            const distFromCenterY = Math.abs((height / 2) - y);

            // Randomly select a type of influence (0: Euclidean, 1: Exponential, 2: Linear, 3: Logarithmic)
            const influenceType = Math.floor(seededRandom(seed + x + y) * 4);

            let centerInfluence;

            // Apply selected influence type
            switch (influenceType) {
                case 0: // Euclidean distance influence
                    const distFromCenter = Math.sqrt(Math.pow(distFromCenterX, 2) + Math.pow(distFromCenterY, 2));
                    const maxDist = Math.sqrt(Math.pow(width / 2, 2) + Math.pow(height / 2, 2));
                    centerInfluence = 1 - (distFromCenter / maxDist);
                    break;

                case 1: // Exponential decay influence
                    const decayFactor = 0.1; // Controls how quickly the influence drops off
                    centerInfluence = Math.exp(-Math.sqrt(Math.pow(distFromCenterX, 2) + Math.pow(distFromCenterY, 2)) * decayFactor);
                    break;

                case 2: // Linear decay influence
                    centerInfluence = 1 - (distFromCenterX + distFromCenterY) / (Math.abs((width / 2) - 0) + Math.abs((height / 2) - 0));
                    break;

                case 3: // Logarithmic decay influence
                    const maxDistLog = Math.sqrt(Math.pow(width / 2, 2) + Math.pow(height / 2, 2));
                    centerInfluence = 1 - Math.log(Math.sqrt(Math.pow(distFromCenterX, 2) + Math.pow(distFromCenterY, 2)) + 1) / Math.log(maxDistLog + 1);
                    break;

                default:
                    centerInfluence = 1; // Default to no influence
            }

            // Adjust probability for the main color to flock toward the center
            const adjustedSeedValue = seededValue + centerInfluence * 0.5; // Increase main color chance near the center
            let color;
            if (adjustedSeedValue < 0.6) {
                color = mainColor; // Main color has a higher chance in the center
            } else if (adjustedSeedValue < 0.8) {
                color = subColor1; // First sub-color has a 20% chance
            } else {
                color = subColor2; // Second sub-color has a 20% chance
            }

            // Draw pixel for the left side of the image
            ctx.fillStyle = color;
            ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);

            // Mirroring horizontally
            ctx.fillRect((width - x - 1) * pixelSize, y * pixelSize, pixelSize, pixelSize);

            // If vertical mirroring is enabled, mirror vertically
            if (shouldMirrorVertically) {
                ctx.fillRect(x * pixelSize, (height - y - 1) * pixelSize, pixelSize, pixelSize); // Vertical mirror
                ctx.fillRect((width - x - 1) * pixelSize, (height - y - 1) * pixelSize, pixelSize, pixelSize); // Horizontal + vertical mirror
            }
        }
    }

    return canvas.toDataURL(); // Get the base64 representation of the image
}
   
   
function updateStatus() {
     const fields = ['strength', 'constitution', 'dexterity', 'intelligence', 'resolve', 'perception'];
const bloodType = document.getElementById('bloodType').value;
    const skinColor = document.getElementById('skinColor').value;
    const leftEyeColor = document.getElementById('leftEyeColor').value;
    const rightEyeColor = document.getElementById('rightEyeColor').value;
    const hairColor = document.getElementById('hairColor').value;
    const hairStyle = document.getElementById('hairStyle').value;
	 const height = document.getElementById('height').value;
    const weight = document.getElementById('weight').value;
	const bmiText = document.getElementById('bmi').innerText;  // BMI: 23.45 (Normal weight)
    const bodyBuildText = document.getElementById('bodyBuild').innerText;  // Body Build: Average
    // Get the values and their corresponding ratings
    const ratings = fields.map(field => {
        const fieldValue = document.getElementById(field).value;
        let fieldRating = "F";
        
        if (fieldValue >= 21) fieldRating = "S";
        else if (fieldValue >= 20) fieldRating = "A";
        else if (fieldValue >= 18) fieldRating = "B";
        else if (fieldValue >= 16) fieldRating = "C";
        else if (fieldValue >= 14) fieldRating = "D";
        else if (fieldValue >= 10) fieldRating = "E";
        else if (fieldValue <= 8) fieldRating = "F";

        return { value: fieldValue, rating: fieldRating };
    });
	  const race = document.getElementById('race').value;
    const raceTraits = document.getElementById('appearanceTraits').innerText; // This is where the traits are shown.

        // Generate a random ID (used as seed)
    const randomId = Math.floor(Math.random() * 1e6);
          
          

   const statusText = `
    ${document.getElementById('firstName').value} ${document.getElementById('lastName').value}
	Race: ${race}
	
		Potential: ${document.getElementById('potentialDisplay').innerText}
        Attributes
        Strength: ${ratings[0].value} (${ratings[0].rating}) 		Constitution: ${ratings[1].value} (${ratings[1].rating})  
        Dexterity: ${ratings[2].value} (${ratings[2].rating}) 		Intelligence: ${ratings[3].value} (${ratings[3].rating})
		Resolve: ${ratings[4].value} (${ratings[4].rating}) 		Perception: ${ratings[5].value} (${ratings[5].rating})
		
        Physical Appearance
        Blood Type: ${bloodType}        Skin Color: ${skinColor}
        Left Eye Color: ${leftEyeColor}        Right Eye Color: ${rightEyeColor}
        Hair Color: ${hairColor}        Hair Style: ${hairStyle}
		Race Traits: ${raceTraits}
		
		Physical Characteristics
		Height: ${height}		Weight: ${weight} 
		${bodyBuildText}
        
		
        Condition
        Pain: ${document.getElementById('pain').value}        Thirst: ${document.getElementById('thirst').value}
        Rest: ${document.getElementById('rest').value}        Hunger: ${document.getElementById('hunger').value}

        Environment
        Heat: ${document.getElementById('heat').value}        
        Place: ${document.getElementById('place').value}       Lighting: ${document.getElementById('lighting').value}
        Weather: ${document.getElementById('weather').value}     Moon: ${document.getElementById('moon').value}
        Date: ${document.getElementById('date').value}        Time: ${document.getElementById('time').value}
        Wind: ${document.getElementById('wind').value}        Temperature: ${document.getElementById('temperature').value}

        Combat
        Combat Class: ${document.getElementById('combatClass').value}		Combat Technique: ${document.getElementById('combatTechnique').value}
        Main Hand: ${document.getElementById('wieldLHand').value}		Offhand: ${document.getElementById('wieldRHand').value}
    `;

   

    // Generate pixel art using the randomId as the seed
    const pixelArtImage = generateSymmetricalPixelArt(randomId, 20, 20, 20); // Generate 16x16 pixel art with 8px per square

    // Update statusDisplay and sideStatus with both status and pixel art
    document.getElementById('statusDisplay').innerHTML = `
            <figure>
                  <figure style="display: flex; flex-direction: column; align-items: center;">
            <figcaption style="text-align: center; margin-bottom: 8px;">Emblem</figcaption>
               <img src="${pixelArtImage}" alt="Pixel Art">
        </figure>
	<p>${statusText}</p>

    `;
    
    const sideStatusElement = document.getElementById('sideStatus');
   sideStatusElement.innerHTML = `
    <figure>
   <figure style="display: flex; flex-direction: column; align-items: center;">
            <figcaption style="text-align: center; margin-bottom: 8px;">Emblem</figcaption>
               <img src="${pixelArtImage}" alt="Pixel Art">
        </figure> 
        <pre>${statusText}</pre>
       
 `;
 
}




function generateNarrative() {
    const firstName = document.getElementById('firstName').value || "Unknown";
    const lastName = document.getElementById('lastName').value || "Hero";
    const place = document.getElementById('place').value || "an unknown location";
    const weather = document.getElementById('weather').value || "clear skies";
    const date = document.getElementById('date').value || "an undefined date";
    const time = document.getElementById('time').value || "an unknown time";
    const combatClass = document.getElementById('combatClass').value || "no combat class";
    const wieldLHand = document.getElementById('wieldLHand').value || "empty hands";
    const wieldRHand = document.getElementById('wieldRHand').value || "empty hands";
	
    // Stats
    const stats = [
        { name: "strength", value: parseInt(document.getElementById('strength').value) || 0 },
        { name: "dexterity", value: parseInt(document.getElementById('dexterity').value) || 0 },
        { name: "intelligence", value: parseInt(document.getElementById('intelligence').value) || 0 },
        { name: "resolve", value: parseInt(document.getElementById('resolve').value) || 0 },
        { name: "perception", value: parseInt(document.getElementById('perception').value) || 0 },
        { name: "constitution", value: parseInt(document.getElementById('constitution').value) || 0 }
    ];

    // Find highest and second-highest stats
    stats.sort((a, b) => b.value - a.value);
    const highestStat = stats[0];
    const secondHighestStat = stats[1];

    // Literary descriptions for stats
    const statDescriptions = {
        strength: "unparalleled physical prowess",
        dexterity: "agility and nimbleness",
        intelligence: "keen intellect",
        resolve: "unwavering determination",
        perception: "sharp awareness",
        constitution: "endurance and resilience"
    };

    // Narrative templates
    const templates = [
        `
On ${date} at ${time}, ${firstName} ${lastName} was found at ${place}, where the weather was marked by ${weather}.
With ${wieldLHand} in their main hand and ${wieldRHand} in their offhand, ${firstName} stood out as a ${combatClass}, 
known for their ${statDescriptions[highestStat.name]} and ${statDescriptions[secondHighestStat.name]}.

Their journey is just beginning, and the challenges ahead will test their remarkable qualities.
        `,
        `
In the midst of ${weather} at ${place}, ${firstName} ${lastName} stood with ${wieldLHand} in hand.
The day was ${date}, and the time ticked past ${time}. Known far and wide as a ${combatClass}, ${firstName} impressed all with their 
${statDescriptions[highestStat.name]} and ${statDescriptions[secondHighestStat.name]}.

What trials lie ahead remain a mystery, but ${firstName}'s resolve is unshakable.
        `,
        `
The tale begins on ${date}, under ${weather} conditions in ${place}. ${firstName} ${lastName}, a renowned ${combatClass}, 
was seen wielding ${wieldLHand} and ${wieldRHand}. Their reputation was built on their ${statDescriptions[highestStat.name]} 
and ${statDescriptions[secondHighestStat.name]}.

Destiny awaits ${firstName} as their legend unfolds.
        `,
        `
On a day like ${date}, at the stroke of ${time}, ${firstName} ${lastName} arrived at ${place}. Despite the ${weather}, 
they bore ${wieldLHand} in one hand and ${wieldRHand} in the other. People spoke of ${firstName}'s extraordinary 
${statDescriptions[highestStat.name]} and ${statDescriptions[secondHighestStat.name]}.

The world held its breath, waiting for their next move.
        `
    ];

    // Select a random template
    const selectedTemplate = templates[Math.floor(Math.random() * templates.length)];

    // Display the narrative in the status display area
    document.getElementById('statusDisplay').innerText = selectedTemplate.trim();
}


let lockedInputs = {};  // Object to track locked inputs

// Function to toggle lock on inputs
function toggleLock(inputId) {
    const input = document.getElementById(inputId);
    const button = input.nextElementSibling;

    // Toggle the locked state
    if (lockedInputs[inputId]) {
        // If locked, unlock it
        input.disabled = false;
        lockedInputs[inputId] = false;
        button.textContent = "Lock";
    } else {
        // If not locked, lock it
        input.disabled = true;
        lockedInputs[inputId] = true;
        button.textContent = "Unlock";
    }
}

// Function to check if an input is locked
function isLocked(inputId) {
    return lockedInputs[inputId] === true;
}

// Randomize Combat Technique for a Combat Class
function getRandomCombatTechnique(combatClass) {
    const combatTechniques = {
                Juggernaut: [
            "Immovable Stance", "Iron Fist Discipline", "Relentless Might Form",
            "Titan’s Resolve Stance", "Mountain Breaker Art", "Unstoppable Force Form",
            "Ironclad Discipline", "Battleborn Stance", "Endless Endurance Art",
            "Colossal Rampage Form"
        ],
        BladeDancer: [
            "Gale Slash Art", "Silver Mirage Dance", "Quicksteel Form",
            "Blade Wraith Stance", "Shadowstrike Discipline", "Storm Reaver Dance",
            "Crimson Edge Art", "Flashstep Discipline", "Wind Cutter Stance",
            "Swiftstrike Form"
        ],
        Chieftain: [
            "Arcane Fury Stance", "Battlecraft Discipline", "Runehammer Form",
            "Stormcaller Art", "Arcane Onslaught Stance", "Elemental Reaver Discipline",
            "Runeblade Form", "Inferno Wave Art", "Mystic Siege Stance",
            "Celestial Wrath Form"
        ],
        IronWill: [
            "Unbreakable Stance", "Endurance Discipline", "Resolute Fury Art",
            "Steelheart Form", "Unyielding Resolve Stance", "Indomitable Spirit Art",
            "Ironclad Tenacity Discipline", "Fortress Stance", "Fearless Defiance Form",
            "Will of the Titans Art"
        ],
        Berserker: [
            "Frenzied Rampage Stance", "Wild Fury Discipline", "Bloodraged Form",
            "Savage Fury Stance", "Berserker’s Eye Art", "Predatory Onslaught Form",
            "Reckless Charge Discipline", "Howling Fury Art", "Apex Predator Stance",
            "Crimson Madness Form"
        ],
        Titan: [
            "Earthshaker Art", "Colossus Discipline", "Titan’s Fury Stance",
            "Mountainheart Form", "Immovable Giant Art", "Earthborn Stance",
            "Stonebreaker Discipline", "Immense Power Form", "Unstoppable Titan Stance",
            "Tremor Strike Form"
        ],
        StalwartDefender: [
            "Unyielding Wall Stance", "Shieldbearer Discipline", "Last Stand Form",
            "Ironclad Protector Art", "Defender’s Resolve Stance", "Stonewall Discipline",
            "Shield of the Fallen Art", "Fortress Resolve Form", "Immovable Guardian Stance",
            "Bastion of Hope Art"
        ],
        Mercenery: [
            "Agile Endurance Art", "Escape Artist Stance", "Wilderness Form",
            "Survivalist Discipline", "Elusive Guardian Stance", "Nimble Resilience Art",
            "Wild Runner Discipline", "Serpent’s Grace Stance", "Tenacious Pursuit Form",
            "Enduring Predator Discipline"
        ],
        Bladecaster: [
            "Shadowcaster Form", "Eldritch Edge Stance", "Mindshard Discipline",
            "Bladecaster Art", "Arcane Fang Stance", "Runeweaver Form",
            "Phantomstrike Discipline", "Mystic Slash Art", "Mindbreaker Stance",
            "Spectral Piercer Discipline"
        ],
        MartialArtist: [
            "Crimson Lotus Form", "Serpent's Flow Stance", "Tiger's Fury Discipline",
    "Heavenly Crane Art", "Dragonfire Strike Stance", "Shadow Fang Form",
    "Eagle Claw Discipline", "Iron Palm Art", "Flowing Water Stance",
    "Celestial Tempest Form"
        ],
        Sentinel: [
            "Perceptive Wall Stance", "Fortress Vigilance Discipline", "Watchful Guardian Form",
            "Ironwatch Art", "Sentinel’s Resolve Stance", "Perceptive Shield Form",
            "Sentinel of the Mind Art", "Ironclad Watch Stance", "Titanwatch Discipline",
            "Unseen Protector Form"
        ],
        SavageSwifter: [
            "Cat’s Leap Form", "Savage Dance Discipline", "Stormspin Stance",
            "Agile Pounce Art", "Quickstrike Acrobatics", "Momentum Dance Form",
            "Panther’s Precision Stance", "Skyblaze Discipline", "Feral Twirl Art",
            "Raging Flip Form"
        ],
        Swiftblade: [
            "Razorwind Form", "Swiftsurge Stance", "Fleetstrike Discipline",
            "Viper’s Swiftness Art", "Quickdraw Discipline", "Bladewind Form",
            "Enduring Flash Art", "Silent Cut Stance", "Steelswift Discipline",
            "Lightning Speed Form"
        ],
        PhantomBlade: [
            "Spectral Slash Stance", "Ethereal Strike Discipline", "Ghostblade Form",
            "Shade Step Art", "Veil of Shadows Discipline", "Phantom Piercer Stance",
            "Haunting Blow Discipline", "Ghostwalker Stance", "Silent Assassin Art",
            "Shadowstrike Form"
        ],
        Assassin: [
            "Silent Fang Form", "Lethal Precision Discipline", "Shadowstrike Stance",
            "Deadly Silence Art", "Nightstalker Discipline", "Critical Eye Form",
            "Deathblow Stance", "Serpent’s Strike Discipline", "Veiled Hunter Art",
            "Swift Killer Form"
        ],
        Tactician: [
            "Tactical Fury Form", "Strategist’s Strike Art", "Mind over Might Discipline",
            "Commanding Assault Stance", "Battle Planner Form", "Quick Wit Strike Discipline",
            "Strategist’s Fury Art", "Battlefield Brain Form", "Tactical Mastery Stance",
            "Genius Strike Discipline"
        ],
        Colossus: [
            "Behemoth’s Wrath Form", "Titan’s Might Discipline", "Colossal Strike Stance",
            "Earthshaker Art", "Thunderous Impact Discipline", "Mountain Mover Stance",
            "Immense Power Form", "Gigantic Fury Art", "Crushing Strength Stance",
            "Leviathan’s Rage Discipline"
        ],
        FleshFortress: [
            "Stubborn Resolve Art", "Unyielding Wall Form", "Enduring Titan Stance",
            "Immovable Might Discipline", "Stalwart Defender Art", "Eternal Strength Form",
            "Stonebreaker Stance", "Tireless Titan Discipline", "Indomitable Form",
            "Resolute Wall Stance"
        ],
        Tempest: [
            "Cyclone Strike Form", "Tempest Dance Stance", "Windblade Art",
            "Razorstorm Discipline", "Stormblaze Form", "Whirlwind Slash Stance",
            "Gale Fury Discipline", "Cyclone Piercer Form", "Skybound Slash Art",
            "Tempest Fury Stance"
        ],
        AuraWarrior: [
            "Aura Strike Stance", "Ki Flow Combat Art", "Aura Fury Discipline",
            "Heavenly Blade Form", "Divine Lotus Stance", "Aurabound Art",
            "Aura Assault Form", "One Slash Discipline", "Thunderki Form",
            "Asura Wrath Art"
        ],
        IronAura: [
            "Shield of Aegis Stance", "Unbreakable Ward Form", "Eternal Protector Art",
            "Arcane Shield Discipline", "Stalwart Shield Stance", "Mystical Bastion Form",
            "Sacred Defense Art", "Shieldbearer’s Resolve Discipline", "Mystic Barrier Stance",
            "Fortified Will Form"
        ],
              // Ranged CombatClass Techniques
        deadeye: ["Eagle’s Focus Stance", "Pinpoint Precision Art", "Sharpshot Discipline", "Hawk’s Vision Form", "Silent Arrow Stance", "Longshot Precision Discipline", "True Sight Form", "Hunter’s Mark Art", "Bullseye Strike Stance", "Silent Strike Discipline"],
        Deadeye: ["Silent Observer Art", "Longshot Discipline", "Pinpoint Focus Stance", "Phantom Shot Form", "One Shot Art", "Deadly Aim Discipline", "Steady Hands Stance", "Hidden Killer Form", "Eagle’s Eye Art", "Focused Strike Discipline"],
        Scout: ["Silent Sentinel Stance", "Swift Tracker Discipline", "Hunter’s Vigil Art", "Pathfinder Form", "Stealth Watch Stance", "Tracking Precision Discipline", "Unseen Stalker Form", "Survivalist’s Eye Art", "Scout’s Focus Stance", "Watchful Pursuit Discipline"],
        Trickshot: ["Arcane Trick Discipline", "Bouncing Shot Form", "Quickthinker’s Precision Art", "Trickster’s Aim Stance", "Clever Ricochet Discipline", "Illusory Arrow Art", "Trapshot Form", "Swift Redirect Stance", "Mindful Shot Discipline", "Trickster’s Focus Art"],
        Powershot: ["Heavy Shot Form", "Power Focus Stance", "Bullseye Strike Discipline", "Knockback Arrow Art", "Piercing Shot Stance", "Mighty Range Discipline", "Strengthened Focus Form", "Titan’s Shot Art", "Musclecraft Discipline", "Long-range Fury Stance"],
        Vanguard: ["Steady Deflection Form", "Ironclad Focus Stance", "Enduring Vigil Discipline", "Shielding Arrow Art", "Guardian’s Shot Form", "Watchful Defender Stance", "Sturdy Hunter Discipline", "Tactical Barrage Art", "Guardian’s Focus Stance", "Resilient Shot Form"],
        ArcaneArcher: ["Mystic Arrow Stance", "Arcane Shot Discipline", "Eldritch Precision Art", "Runebound Focus Form", "Elemental Arrow Discipline", "Enchanted Barrage Stance", "Arcane Piercer Art", "Mystic Bowmaster Form", "Runic Precision Stance", "Eldritch Barrage Discipline"],
        GodEye: ["Omniscient Shot Art", "Divine Focus Discipline", "Clairvoyant Barrage Stance", "Ultimate Sight Form", "Vision of Truth Stance", "Unerring Arrow Art", "Celestial Aim Discipline", "Precision Strike Stance", "Fate’s Eye Form", "Unseen Vision Discipline"],

        // Magic CombatClass Techniques
        Sorcerer: ["Arcane Fury Stance", "Mystical Empowerment Art", "Sorcerer’s Wrath Discipline", "Ethereal Pulse Form", "Firebrand Focus Stance", "Mana Surge Discipline", "Arcane Infusion Form", "Soulfire Art", "Spellwoven Might Stance", "Bloodspell Discipline"],
        Spiritist: ["Soul Weaver Art", "Phantom Sense Discipline", "Spirit Channel Form", "Ghost Whisper Stance", "Spirit Surge Art", "Ethereal Sight Discipline", "Wraithcall Stance", "Astral Hand Form", "Spectral Presence Art", "Spiritwalk Discipline"],
        Mage: ["Mystic Empowerment Form", "Arcane Mastery Stance", "Energy Channel Discipline", "Eldritch Burst Art", "Mystic Surge Form", "Unbreakable Focus Stance", "Mana Flow Discipline", "Enchanted Strength Art", "Runeflare Discipline", "Elemental Mastery Form"],
        Diviner: ["Foresight Discipline", "Clairvoyant Focus Art", "Mystic Vision Stance", "Augury Strike Form", "Precognitive Magic Discipline", "Divination’s Reach Art", "Future Sight Form", "Oracle’s Sight Stance", "Fatebinding Discipline", "Prophetic Strike Art"],
        ManaWeaver: ["Supreme Arcana Stance", "Infinite Knowledge Art", "Ultimate Power Discipline", "Archmage’s Fury Form", "Celestial Summons Stance", "Master of Elements Art", "Cosmic Arcana Discipline", "Omnipotent Surge Form", "Endless Wisdom Stance", "Grand Sorcery Art"],
        MentalFortress: ["Ironclad Will Art", "Psychic Barrier Discipline", "Mindshield Stance", "Mental Fortitude Form", "Unbreakable Focus Art", "Soul Deflection Discipline", "Steelmind Form", "Mental Bastion Stance", "Resilient Mind Discipline", "Unyielding Thought Form"],
        BattlePriest: ["Divine Smite Form", "Sacred Healing Stance", "Celestial Wrath Discipline", "Holy Resilience Art", "God’s Blessing Form", "Faithfire Stance", "Blessed Strike Discipline", "Guardian’s Prayer Art", "Devotion’s Might Form", "Divine Fury Stance"],
        Sage: ["Arcane Shield Discipline", "Mindflow Technique", "Vital Binding Art", "Ethereal Fortitude Form", "Runic Essence Way", "Spirit Ward Stance", "Mental Clarity Discipline", "Resonance Surge Art", "Celestial Barrier Form", "Inner Focus Way"]



    };

    if (combatTechniques[combatClass]) {
        const techniques = combatTechniques[combatClass];
        return techniques[Math.floor(Math.random() * techniques.length)];
    }
    return "No Technique";
}

// Randomize Combat Details
function randomizeCombatDetails() {
    const fields = ['strength', 'constitution', 'dexterity', 'intelligence', 'resolve', 'perception'];
    const stats = fields.map(field => ({
        name: field,
        value: parseInt(document.getElementById(field)?.value || 0, 10)
    })).sort((a, b) => b.value - a.value);  // Sorting stats in descending order

    // Collect the highest and second-highest stats
    let highestStat = stats[0].name;
    let highestValue = stats[0].value;
    
    // Check if multiple stats share the highest value
    let highestStats = stats.filter(stat => stat.value === highestValue);

    if (highestStats.length > 1) {
        // Randomly select the highest stat if there's a tie
        highestStat = highestStats[Math.floor(Math.random() * highestStats.length)].name;
    }

    // Find the second highest value, excluding the highest stat
    let secondHighestStats = stats.filter(stat => stat.name !== highestStat);
    let secondHighestValue = secondHighestStats[0].value;

    // Check if there are multiple second-highest stats
    let secondHighestStatsFiltered = secondHighestStats.filter(stat => stat.value === secondHighestValue);

    // If the gap between highest and second-highest is large enough, assign the highest to both
    const gapThreshold = 20; // You can adjust this threshold
    if (highestValue - secondHighestValue > gapThreshold) {
        secondHighestStat = highestStat; // Assign the highest stat to the second as well
    } else {
        if (secondHighestStatsFiltered.length > 1) {
            // Randomly select the second highest stat if there's a tie
            secondHighestStat = secondHighestStatsFiltered[Math.floor(Math.random() * secondHighestStatsFiltered.length)].name;
        } else {
            secondHighestStat = secondHighestStats[0].name;
        }
    }

    // Log the highest and second highest stats for debugging
    console.log(`Highest Stat: ${highestStat}, Second Highest Stat: ${secondHighestStat}`);


   // Dynamic combat class selection based on coreStat and subStat
    const classNames = [
        'Juggernaut', 'BladeDancer', 'Chieftain', 'IronWill', 'Berserker', 'Titan', 
        'StalwartDefender', 'Mercenery', 'Bladecaster', 'MartialArtist', 'Sentinel', 'SavageSwifter',
        'Swiftblade', 'AuraWarrior', 'Assassin', 'Tactician', 'Colossus', 'FleshFortress',
        'Tempest', 'arcaneWarrior', 'IronAura','Deadeye', 'Scout', 'Trickshot',
        'Powershot', 'Vanguard', 'ArcaneArcher', 'GodEye', 'Sorcerer', 'Spiritist', 'Mage',
        'Diviner', 'ManaWeaver', 'MentalFortress', 'BattlePriest', 'PhantomBlade', 'Sage',
    ];

    // Find the matching combat class based on coreStat and subStat in strict order
    let selectedClass = classNames.find(className => {
        switch (className) {
            case 'Juggernaut': return highestStat === 'strength' && secondHighestStat === 'constitution';
            case 'BladeDancer': return highestStat === 'strength' && secondHighestStat === 'dexterity';
            case 'Chieftain': return highestStat === 'strength' && secondHighestStat === 'intelligence';
            case 'IronWill': return highestStat === 'strength' && secondHighestStat === 'resolve';
            case 'Berserker': return highestStat === 'strength' && secondHighestStat === 'perception';
            case 'Titan': return highestStat === 'constitution' && secondHighestStat === 'strength';  // Corrected mapping
            case 'StalwartDefender': return highestStat === 'constitution' && secondHighestStat === 'resolve';
            case 'Mercenery': return highestStat === 'constitution' && secondHighestStat === 'dexterity';
            case 'Bladecaster': return highestStat === 'dexterity' && secondHighestStat === 'intelligence';
            case 'MartialArtist': return highestStat === 'dexterity' && secondHighestStat === 'resolve';
            case 'Sentinel': return highestStat === 'constitution' && secondHighestStat === 'perception';
            case 'SavageSwifter': return highestStat === 'dexterity' && secondHighestStat === 'strength';
            case 'Swiftblade': return highestStat === 'dexterity' && secondHighestStat === 'constitution';
            case 'AuraWarrior': return highestStat === 'resolve' && secondHighestStat === 'strength';
            case 'Assassin': return highestStat === 'dexterity' && secondHighestStat === 'perception';
            case 'Tactician': return highestStat === 'intelligence' && secondHighestStat === 'strength';
            case 'Colossus': return highestStat === 'strength' && secondHighestStat === 'strength';
            case 'FleshFortress': return highestStat === 'constitution' && secondHighestStat === 'constitution';
            case 'Tempest': return highestStat === 'dexterity' && secondHighestStat === 'dexterity';
            case 'IronAura': return highestStat === 'resolve' && secondHighestStat === 'constitution';
            case 'PhantomBlade': return highestStat === 'resolve' && secondHighestStat === 'dexterity';
            case 'Deadeye': return highestStat === 'perception' && secondHighestStat === 'dexterity';
            case 'Scout': return highestStat === 'perception' && secondHighestStat === 'resolve';
            case 'Trickshot': return highestStat === 'perception' && secondHighestStat === 'intelligence';
            case 'Powershot': return highestStat === 'perception' && secondHighestStat === 'strength';
            case 'Vanguard': return highestStat === 'perception' && secondHighestStat === 'constitution';
            case 'ArcaneArcher': return highestStat === 'intelligence' && secondHighestStat === 'dexterity';
            case 'GodEye': return highestStat === 'perception' && secondHighestStat === 'perception';
            case 'Sorcerer': return highestStat === 'resolve' && secondHighestStat === 'intelligence';
            case 'Spiritist': return highestStat === 'resolve' && secondHighestStat === 'perception';
            case 'Mage': return highestStat === 'intelligence' && secondHighestStat === 'resolve';
            case 'Diviner': return highestStat === 'intelligence' && secondHighestStat === 'perception';
            case 'ManaWeaver': return highestStat === 'intelligence' && secondHighestStat === 'intelligence';
            case 'MentalFortress': return highestStat === 'resolve' && secondHighestStat === 'resolve';
            case 'BattlePriest': return highestStat === 'constitution' && secondHighestStat === 'intelligence';
            case 'Sage': return highestStat === 'intelligence' && secondHighestStat === 'constitution';
            default: return false;
        }
    });

    if (selectedClass) {
        document.getElementById('combatClass').value = selectedClass;
    } else {
        document.getElementById('combatClass').value = "nothing";  // If no class matches
    }

    let combatClass = document.getElementById('combatClass').value;
    let combatStyle = document.getElementById('combatStyle').value;
    let combatTechnique = document.getElementById('combatTechnique').value;


    if (!isLocked('combatStyle')) {
        if (["Juggernaut", "BladeDancer", "Chieftain", "IronWill", "Berserker", "Titan", "StalwartDefender", "Mercenery", "Vanguard", "Bladecaster", "MartialArtist", "Sentinel", "SavageSwifter", "Swiftblade", "AuraWarrior", "Assassin", "Tactician", "Colossus", "FleshFortress", "Tempest", "arcaneWarrior", "IronAura", "PhantomBlade"].includes(combatClass)) {
    combatStyle = "Melee";
} else if (["deadeye", "Deadeye", "Scout", "Trickshot", "Powershot", "ArcaneArcher", "GodEye"].includes(combatClass)) {
    combatStyle = "Ranged";
} else if (["Sorcerer", "Spiritist", "Mage", "Diviner", "ManaWeaver", "MentalFortress", "BattlePriest", "Sage"].includes(combatClass)) {
    combatStyle = "Magic";
}
        document.getElementById('combatStyle').value = combatStyle;
    }

    if (!isLocked('combatTechnique')) {
        combatTechnique = getRandomCombatTechnique(combatClass);
        document.getElementById('combatTechnique').value = combatTechnique;
    }
}

// Function to randomize inputs, skipping locked ones
function randomizeStatus() {	
    const fields = ['strength', 'constitution', 'dexterity', 'intelligence', 'resolve', 'perception'];
    const thirstyOptions = ['Mild', 'Very thirsty', 'Dehydrated', 'Parched', 'Refreshed', 'Hydrated', 'Fully Quneched'];
    const restOptions = ["nothing", "Rested", "Sleepy", "Awake", "Fatigued"];
    const painOptions = ['0', 'Light', 'Moderate', 'Severe', 'Intense'];
    const hungerOptions = ['Hungry', 'Starving', 'Ravenous', 'Famished', 'Satiated', 'Full'];
    const heatOptions = ['Comfortable', 'Warm', 'Hot', 'Sweltering', 'Unbearable'];
    const lightingOptions = ['Bright', 'Dim', 'Flickering', 'Dark', 'Shadowy'];
    const weatherOptions = ['Clear', 'Rainy', 'Foggy', 'Windy', 'Stormy'];
    const moonOptions = ['New moon', 'Crescent', 'Half moon', 'Full moon', 'Waning'];
    const windOptions = ['Calm', 'Breezy', 'Windy', 'Gale', 'Storm'];
    const temperatureOptions = ['C-41 F', 'C-32 F', 'C-22 F', 'C-50 F', 'C-60 F'];
    const placeOptions = [
  'Evac shelter', 'Forest clearing', 'Cave', 'Ruins', 'Battlefield', 'Village center', 
  'Mountain top', 'Underground hideout', 'Cemetery', 'Abandoned castle', 'Merchant square', 
  'Windmill', 'Waterfall base', 'Desert oasis', 'Swamp hut', 'Spiritual shrine', 'Ironhold Keep', 
  'Stormwatch Fortress', 'Eldergrove Sanctuary', 'Blackthorn Citadel', 'Frostpeak Mountains', 
  'Shadowfen Marsh', 'Dragonspire Peaks', 'Silvermoon Vale', 'Cinderfall Fortress', 'Ravenspire Tower', 
  'Dawnfall Abbey', 'Sunfire Bastion', 'Frosthelm Keep', 'Starfall Spire', 'Nightfall Glade', 
  'Stormreach Castle', 'The Darkenwood', 'Emberstone Citadel', 'Thornhelm Bastion', 'Skyforge Hold', 
  'Crystalbrook Village', 'Ashen Hollow', 'Ironstone Pass', 'Hollowbrook Hollow', 'The Witchwood', 
  'Brightharbor Port', 'Wildheart Plains', 'Dawnridge Hill', 'The Ironvault', 'Shadowmire Cavern', 
  'Goldendale Mines', 'Wolfsbane Keep', 'Ironclad Shore', 'The Shattered Spire', 'Emberwatch Tower', 
  'Blackstone Mountain', 'Stormwind Plains', 'The Silent Vale', 'Moonshadow Ruins', 'Coldridge Vale', 
  'Grim Hollow Citadel', 'Thornforge Castle', 'The Silver Depths', 'Frostwind City', 'Highgard Summit', 
  'Blackthorn Marsh', 'The Eternal Grove', 'Wyrmsfall Fortress', 'The Darkened Vale', 'Mistwood Keep', 
  'Jade Dragon Temple', 'The Crimson Lotus Garden', 'Shimmering Bamboo Grove', 'The Moonlit Pagoda', 
  'Black Serpent Monastery', 'The Forbidden City of Onyx', 'The Silver Lotus Lake', 'Windwalker Mountain', 
  'Lotus Blossom Sanctuary', 'The Sunken Kingdom of Tashira', 'Crimson Cloud Ridge', 'Celestial Crane Tower', 
  'The Jade Emperor\'s Palace', 'The Whispering Winds Temple', 'Pearl Lotus Lagoon', 'The Temple of Thousand Lanterns', 
  'The Silk Road Caravanserai', 'The Skyfall Monastery', 'Imperial Jade Fortress', 'The Golden Palace of Kessho', 
  'Mount Hoshiko', 'The Hidden City of Takara', 'The Cloud Veil Mountain', 'Dragon’s Breath Valley', 'Firefly Haven', 
  'The Great Cherry Blossom Citadel', 'The Moonstone Temple', 'The Eternal Bamboo Forest', 'The Mystic Plains of Akimoto', 
  'The Serpent’s Fang Castle', 'The Black Lotus Citadel', 'Sunblade Peak', 'The Floating Pagodas of Ten’yo', 
  'The Sacred Lotus Shrine', 'The Tiger’s Fang Monastery', 'The Whispering Bamboo Temple', 'The Temple of the Fallen Sun', 
  'The Golden Pagoda of Suzuka', 'The Crystal Caverns of Yume', 'Silverwind Village', 'The Imperial Gardens of Kyoshi', 
  'The Twin Moon Temple', 'The Forbidden Palace of Kuroda', 'The Celestial Garden of Shura', 'The Shrine of the White Crane', 
  'The Valley of Eternal Blossoms', 'The Black Wolf Clan Fortress', 'The Radiant Moon Valley', 'The Sacred Stone Temple', 
  'The Dragon’s Eye Citadel', 'The Wailing Crypts', 'Blackthorn Keep', 'The Hollowed Abyss', 'The Bloodmoon Castle', 
  'The Cursed Marshlands', 'The Silent Tombs', 'The Forsaken City', 'The Nightshade Fortress', 'The Shadowed Vale', 
  'The Forgotten Hollow', 'The Tomb of Eternal Night', 'Ashen Hall', 'The Weeping Wasteland', 'The Abyssal Chasm', 
  'The Demon’s Maw', 'The Darkened Sanctuary', 'The Necropolis of Souls', 'The Sunken Chapel', 'The Grimspire', 
  'The Stygian Pits', 'The Haunted Forest of Lost Souls', 'The Blackened Citadel', 'The Witch\'s Lair', 'The Veil of Sorrow', 
  'The Ruins of Despair', 'The Blighted Lands', 'The Bleeding Hills', 'The Scorched Keep', 'The Veins of the Dead', 
  'The Abyssal River', 'The Thorns of Ashen Hollow', 'The Realm of Shattered Dreams', 'The Plagued Hollow', 
  'The Crumbling Castle of the Damned', 'The Rotted Citadel', 'The Silent City', 'The Tomb of Forgotten Kings', 
  'The Blackthorn Abbey', 'The Darkened Spire', 'The Blood-soaked Battlefield', 'The Desolate Chapel', 'The Fiend’s Den', 
  'The Cursed Isle', 'The Iron Graveyard', 'The Black Mirror Lake', 'The Valley of Lost Echoes', 'The Hollowing Fields', 
  'The Withered Forest', 'The Dark Fortress of Despair', 'The Last Altar of the Forsaken',
  
  // New place names added:
  'Whispering Pines Village', 'Elderglen Farmstead', 'Oakwood Hollow', 'Moonlit Meadows', 
  'Windwhistle Farms', 'The Greenvale Village', 'Mistbrook Crossing', 'Summerwind Glade', 
  'Thistlewood Hamlet', 'Briarhill Cottage', 'Riverstone Hollow', 'The Faerywood Glade', 
  'Meadowbrook Vale', 'Tanglebrook Farm', 'Willowmere Village', 'Stonemount Hollow', 'Briarpatch Homestead', 
  'Chestnut Grove', 'Dappled Hollow Farm', 'Quiet Glenstead', 'Ravenshade Orchard', 'Thornridge Village', 
  'Frostwell Homestead', 'The Sweetbriar Farms', 'Silvermist Village', 'Harvestfall Hollow', 'Everwood Cottage', 
  'Woodlands Edge', 'Pinehill Farm', 'Oakspire Valley', 'Autumnbrook', 'The Old Wilds Estate', 'Gossamer Meadows', 
  'Morningsun Village', 'Greenhill Homestead', 'Windmill Glen', 'Autumnblossom Village', 'Stonebrook Farm', 
  'Glimmerfield Vale', 'Sunbloom Homestead', 'Hallowoak Hollow', 'Redleaf Meadows', 'Goldenbough Orchard', 
  'Frostbranch Village', 'Ivyfield Homestead', 'Whitewood Grove', 'Starfall Ridge', 'Rollinghill Farmstead', 
  'The Quiet Orchard', 'Thornhill Village'
];
    const firstNames = ['John', 'Jane', 'Alex', 'Chris', 'Taylor', 'Jordan', 'Morgan', 'Jamie', 'Casey', 'Riley', 'Li', 'Wang', 'Zhang', 'Liu', 'Chen', 'Yang', 'Huang', 'Zhao', 'Xu', 'Zhou', 'Sun', 'He', 'Gao', 'Lin', 'Wu', 'Zhou', 'Deng', 'Yu', 'Tang', 'Xu',
'James', 'Mary', 'John', 'Jennifer', 'Michael', 'Jessica', 'William', 'Linda', 'David', 'Susan', 'Robert', 'Sarah', 'Joseph', 'Karen', 'Daniel', 'Nancy', 'Thomas', 'Lisa', 'Mark', 'Kimberly',
'Oliver', 'Amelia', 'Harry', 'Emily', 'George', 'Sophie', 'Jack', 'Lily', 'Jacob', 'Charlotte', 'Noah', 'Olivia', 'William', 'Ava', 'Thomas', 'Isabella', 'Henry', 'Mia', 'James', 'Grace',
'Ivan', 'Anastasia', 'Dmitry', 'Maria', 'Alexei', 'Yulia', 'Sergey', 'Elena', 'Pavel', 'Tatiana', 'Andrei', 'Natalia', 'Viktor', 'Olga', 'Mikhail', 'Irina', 'Kirill', 'Vera', 'Roman', 'Daria',
'Alejandro', 'Maria', 'Carlos', 'Carmen', 'Juan', 'Laura', 'Antonio', 'Isabel', 'Javier', 'Marta', 'Francisco', 'Patricia', 'Miguel', 'Elena', 'Luis', 'Teresa', 'Pablo', 'Sofia', 'Manuel', 'Ana',
'Maximilian', 'Anna', 'Lukas', 'Emma', 'Paul', 'Mia', 'Leon', 'Sophia', 'Elias', 'Lina', 'Felix', 'Clara', 'Moritz', 'Laura', 'Jonas', 'Hannah', 'Tim', 'Charlotte', 'Noah', 'Emilia',
'Mohammed', 'Fatimah', 'Ahmed', 'Aisha', 'Ali', 'Noor', 'Abdullah', 'Yasmin', 'Ibrahim', 'Reem', 'Khalid', 'Sara', 'Faisal', 'Layla', 'Saad', 'Maha', 'Ranya', 'Nasser', 'Samira', 'Zain',
'Muhammad', 'Putri', 'Ahmad', 'Siti', 'Budi', 'Dewi', 'Agus', 'Rina', 'Joko', 'Ani', 'Bayu', 'Siti', 'Yanti', 'Eko', 'Nia', 'Hadi', 'Maya', 'Indah', 'Taufik', 'Rizki',
'Aarav', 'Priya', 'Rahul', 'Neha', 'Amit', 'Aisha', 'Raj', 'Sneha', 'Ananya', 'Vijay', 'Deepika', 'Karan', 'Pooja', 'Rohit', 'Riya', 'Sohan', 'Isha', 'Arjun', 'Simran', 'Kartik', 'Tanvi',
'Timur', 'Amina', 'Yerzhan', 'Kamila', 'Alik', 'Ayan', 'Nursultan', 'Gulnara', 'Dauren', 'Assem', 'Ruslan', 'Saltanat', 'Bauyrzhan', 'Diana', 'Meruyert', 'Marat', 'Zhanar', 'Madina', 'Azamat', 'Saniya',
'Chinedu', 'Ngozi', 'Olumide', 'Adebayo', 'Chioma', 'Kemi', 'Emeka', 'Ifeoma', 'Oluwaseun', 'Amara', 'Bola', 'Ireti', 'Durojaiye', 'Tolu', 'Adesola', 'Funke', 'Uche', 'Ngozi', 'Chika', 'Ayotunde',
'Jiho', 'Jiwon', 'Minji', 'Seojin', 'Jisoo', 'Yuna', 'Jihoon', 'Nari', 'Minseok', 'Soojung', 'Taeyang', 'Hana', 'Seungmin', 'Jiwon', 'Sunwoo', 'Kyung', 'Eunjoo', 'Changmin', 'Nari', 'Haebin',
'Hiroshi', 'Yuki', 'Sakura', 'Haruto', 'Yui', 'Takumi', 'Mei', 'Taro', 'Aoi', 'Haruka', 'Satoshi', 'Riko', 'Kaito', 'Ayumi', 'Shinji', 'Kana', 'Kenta', 'Nanami', 'Ren', 'Makoto', 'Natsuki',
'David', 'Miriam', 'Yaara', 'Yitzhak', 'Talia', 'Eli', 'Shira', 'Natan', 'Yael', 'Erez', 'Oren', 'Tamar', 'Reuven', 'Sarah', 'Daniel', 'Or', 'Hila', 'Lior', 'Yaakov', 'Dafna', 'Noa', 'Arthur', 'Eleanor', 'Gawain', 'Guinevere', 'Lancelot', 'Isolde', 'Tristan', 'Alistair', 'Beatrice', 'Roland', 'Rosalind', 'Cedric', 'Matilda', 'Geoffrey', 'Isabel', 'Hugh', 'Adelaide', 'Evangeline', 'Theobald', 'Vivienne',
'Edmund', 'Alfred', 'Margaret', 'Roderick', 'Amelia', 'Benedict', 'Cecilia', 'Godfrey', 'Genevieve', 'Basil', 'Adeline', 'Sybilla', 'Eustace', 'Elinor', 'Percival', 'Aveline', 'Matthias', 'Florence', 'Leopold', 'Marion',
'Lucinda', 'Ambrose', 'Emmeline', 'Edwina', 'Rowena', 'Oswald', 'Emery', 'Millicent', 'Salvator', 'Sabrina', 'Lysander', 'Clementine', 'Ralph', 'Hilda', 'Giles', 'Beatrix', 'Owen', 'Alaric', 'Clara', 'Gwyneth',
'Ignatius', 'Helena', 'Jasper', 'Maud', 'Althea', 'Balthazar', 'Matilda', 'Sylvester', 'Juliana', 'Ferdinand', 'Myrtle', 'Walter', 'Alicia', 'Ephraim', 'Rosamund', 'Elric', 'Seraphina', 'Swanhild', 'Catherine', 'Reuben',
'Reginald', 'Daphne', 'Tobias', 'Winifred', 'Gordon', 'Elspeth', 'Hector', 'Lucia', 'Barnabas', 'Odessa', 'Sibylla', 'Sigmund', 'Odilon', 'Mabel', 'Eamon', 'Estelle', 'Griffin', 'Constance', 'Berengar', 'Ermina',
'Rufus', 'Damaris', 'Gerald', 'Isolde', 'Aldric', 'Margery', 'Raymond', 'Sabina', 'Anselm', 'Wilhelmina', 'Jayden', 'Alyx', 'Khristopher', 'Zacharye', 'Lilliane', 'Sophiah', 'Emmalyn', 'Jonathyn', 'Kaitlynne', 'Krislyn', 'Michaelae', 'Jaxon', 'Cadenze', 'Graciee', 'Jorja', 'Ezraiah', 'Ashtynn', 'Kayleb', 'Lenae', 'Danyelle',
'Gabriellah', 'Madisyn', 'Xander', 'Rowennah', 'Kalebbe', 'Brihanna', 'Tylerr', 'Clyve', 'Rhiannonne', 'Jasminne', 'Blayk', 'Zahraah', 'Levinna', 'Tristanne', 'Zoee', 'Fayth', 'Huntere', 'Chloee', 'Kynzie', 'Ashlynnne',
'Jordynne', 'Chayse', 'Aubreee', 'Daxson', 'Bennet', 'Zaneve', 'Isabellah', 'Maddix', 'Avalyn', 'Halleigh', 'Leighann', 'Broc', 'Elliotth', 'Ciarra', 'Shawndra', 'Emberleigh', 'Tye', 'Violetta', 'Oliviah', 'Adelynne',
'Addisyn', 'Raeleigh', 'Karisa', 'Korrine', 'Jakobi', 'Haizlee', 'Brookk', 'Maddisonn', 'Toriann', 'Danicka', 'Zacharye', 'Eviegh', 'Kendalyn', 'Avari', 'Bryston', 'Mikenna', 'Caralyn', 'Kalliegh', 'Brennan', 'Averlee',
'Severynn', 'Paityn', 'Hailiegh', 'Tylerik', 'Reegan', 'Sophiia', 'Luken', 'Olivya', 'Addyson', 'Kamryn', 'Ava-Lee', 'Graciella', 'Marleena', 'Bradenne', 'Emiliya', 'Braylen', 'Paytonn', 'Everleigh', 'Jaycie', 'Lindeley', 'Astrid', 'Bjorn', 'Sigrid', 'Leif', 'Ingrid', 'Nils', 'Freya', 'Oskar', 'Elsa', 'Magnus', 'Hilda', 'Rune', 'Solveig', 'Erik', 'Kari', 'Thor', 'Anika', 'Jens', 'Viggo', 'Maja',
'Harald', 'Kirsten', 'Sven', 'Greta', 'Aksel', 'Liv', 'Einar', 'Linnea', 'Otto', 'Frida', 'Anders', 'Saga', 'Tobias', 'Tove', 'Henrik', 'Alva', 'Ragnar', 'Birgit', 'Freyja','Jorunn', 'Knut', 'Emil', 'Selma', 'Bengt', 'Ylva', 'Stig', 'Dagny', 'Håkon', 'Frederik', 'Elin', 'Vera', 'Mikkel', 'Ida', 'Sigurd', 'Johanna', 'Lasse', 'Mari', 'Nina',
'Vera', 'Pelle', 'Rikard', 'Birgitta', 'Torben', 'Alfred', 'Mats', 'Tilda', 'Ingmar', 'Klara', 'Rune', 'Thora', 'Bjørn', 'Sanna', 'Ellen', 'Frans', 'Torbjörn', 'Lena'];
   
   const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Miller', 'Davis', 'Garcia', 'Martinez', 'Hernandez', 'Li', 'Wang', 'Zhang', 'Liu', 'Chen', 'Yang', 'Huang', 'Zhao', 'Xu', 'Zhou', 'Sun', 'He', 'Gao', 'Lin', 'Wu', 'Deng', 'Yu', 'Tang', 'Xu',
'Smith', 'Johnson', 'Williams', 'Jones', 'Brown', 'Davis', 'Miller', 'Wilson', 'Moore', 'Taylor', 'Anderson', 'Thomas', 'Jackson', 'White', 'Harris', 'Martin', 'Thompson', 'Garcia', 'Martinez', 'Roberts',
'Brown', 'Jones', 'Taylor', 'Williams', 'Davies', 'Wilson', 'Evans', 'Thomas', 'Johnson', 'Roberts', 'Lewis', 'Walker', 'Wright', 'Green', 'Harris', 'Clarke', 'King', 'Scott', 'Baker', 'Adams',
'Ivanov', 'Petrov', 'Sidorov', 'Smirnov', 'Kuznetsov', 'Popov', 'Vasilyev', 'Mikhailov', 'Morozov', 'Fedorov', 'Solovyev', 'Novikov', 'Borisov', 'Karpov', 'Lebedev', 'Romanov', 'Tikhonov', 'Gusev', 'Kozlov', 'Shishkin',
'Gomez', 'Lopez', 'Martinez', 'Sanchez', 'Perez', 'Rodriguez', 'Garcia', 'Fernandez', 'Ruiz', 'Diaz', 'Hernandez', 'Garcia', 'Jimenez', 'Molina', 'Alvarez', 'Moreno', 'Jimenez', 'Vazquez', 'Castro', 'Mendez',
'Schmidt', 'Müller', 'Schneider', 'Fischer', 'Weber', 'Wagner', 'Becker', 'Hoffmann', 'Schulz', 'Zimmermann', 'Koch', 'Bauer', 'Richter', 'Schröder', 'Neumann', 'Schmitt', 'Hartmann', 'Werner', 'Lange', 'Krause',
'Al-Saud', 'Al-Faisal', 'Al-Harbi', 'Al-Dosari', 'Al-Omari', 'Al-Jabri', 'Al-Mohammed', 'Al-Shammari', 'Al-Qasim', 'Al-Zahrani', 'Al-Mansour', 'Al-Mutairi', 'Al-Khalid', 'Al-Shehri', 'Al-Rashid', 'Al-Salem', 'Al-Hassan', 'Al-Mutlaq', 'Al-Turki',
'Setiawan', 'Suharto', 'Prabowo', 'Putra', 'Wijaya', 'Gunawan', 'Kurniawan', 'Santoso', 'Harsono', 'Budi', 'Sutanto', 'Adi', 'Saputra', 'Hidayat', 'Alamsyah', 'Purnama', 'Rachman', 'Marsono', 'Kusuma', 'Sitorus',
'Patel', 'Sharma', 'Singh', 'Reddy', 'Iyer', 'Kumar', 'Gupta', 'Verma', 'Joshi', 'Mehta', 'Bose', 'Banerjee', 'Choudhury', 'Malhotra', 'Kaur', 'Arora', 'Kapoor', 'Desai', 'Yadav', 'Bhat',
'Zhumabekov', 'Suleimenov', 'Akimbekov', 'Bekturov', 'Zharaskhanov', 'Tengizbayev', 'Nurtazin', 'Dzhumadilov', 'Muratbekov', 'Dauletov', 'Kazbekov', 'Mukhambetov', 'Baymukhanov', 'Mynbayev', 'Kenzhebayev', 'Samalbekov', 'Khamzinov', 'Shalabayeva', 'Toktarov',
'Okeke', 'Adebayo', 'Ogunleye', 'Akinwale', 'Eze', 'Onyekachi', 'Oluwaseun', 'Chukwuemeka', 'Olaoye', 'Ayodele', 'Ajayi', 'Nwankwo', 'Abiola', 'Olawale', 'Obi', 'Ifedayo', 'Ogunbiyi', 'Olatunji', 'Amadi', 'Chibuzo',
'Kim', 'Lee', 'Park', 'Choi', 'Cho', 'Jung', 'Kang', 'Im', 'Han', 'Yoon', 'Lim', 'Seo', 'Shin', 'Oh', 'Ryu', 'Hwang', 'Kwon', 'Nam', 'Song', 'Jeong',
'Tanaka', 'Yamamoto', 'Kobayashi', 'Sato', 'Watanabe', 'Takahashi', 'Yamada', 'Matsumoto', 'Inoue', 'Ishikawa', 'Fujita', 'Yamaguchi', 'Kuroda', 'Hasegawa', 'Iida', 'Sakai', 'Hashimoto', 'Murakami', 'Nakajima', 'Fujimoto',
'Levi', 'Cohen', 'Mizrahi', 'Shalev', 'Dahan', 'Rosenberg', 'Ben-David', 'Zohar', 'Shalom', 'Erez', 'Ben-Ami', 'Nissim', 'Baruch', 'Tzukrel', 'Farkash', 'Yeger', 'Yona', 'Klein', 'Shani', 'Golan', 'Smith', 'Jones', 'Taylor', 'Brown', 'Wilson', 'Evans', 'Thomas', 'Roberts', 'Walker', 'Harris',
'Jackson', 'White', 'Clark', 'Lewis', 'Young', 'King', 'Scott', 'Green', 'Adams', 'Baker',
'Allen', 'Carter', 'Mitchell', 'Perez', 'Morris', 'Wood', 'Davis', 'Hughes', 'Nelson', 'Hill',
'Wright', 'Collins', 'Kingston', 'Turner', 'King', 'Fisher', 'Miller', 'Collier', 'Chapman', 'Cook',
'Freeman', 'Parker', 'Bennett', 'Barnes', 'Price', 'Reed', 'Campbell', 'Cooper', 'Morgan', 'Dubois', 'Lemoine', 'Lefevre', 'Leclerc', 'Moreau', 'Petit', 'Roux', 'Bernard', 'Garnier', 'Blanc',
'Robert', 'Fournier', 'Chauvin', 'Lemoine', 'Meyer', 'Barbier', 'Gauthier', 'Dupont', 'Lemoine', 'Lemoine',
'Martin', 'Girard', 'Boyer', 'Vidal', 'Moulin', 'Dufresne', 'Giraud', 'Marchand', 'Lejeune', 'Perrot',
'Picard', 'Jacquet', 'Tanguy', 'Roch', 'Henri', 'Lemoine', 'Benoit', 'Jacques', 'Carlier', 'Sauvage',
'Deschamps', 'Lemoine', 'Sevigny', 'Blanchard', 'Brossard', 'Legrand', 'Bailly', 'Legros', 'Gilles', 'Schmidt', 'Müller', 'Schneider', 'Fischer', 'Weber', 'Hoffmann', 'Schwarz', 'Bauer', 'Richter', 'Klein',
'Zimmermann', 'Wagner', 'Becker', 'Braun', 'Schulz', 'Jäger', 'Hartmann', 'Schäfer', 'Krause', 'Schmidt',
'Neumann', 'Schuster', 'Peters', 'Meyer', 'Heinrich', 'König', 'Roth', 'Lang', 'Keller', 'Weiß',
'Vogel', 'Lange', 'Hahn', 'Berg', 'Keller', 'Fuchs', 'Reuter', 'Brandt', 'Riedel', 'Zimmer',
'Kraft', 'Lutz', 'Böhm', 'Götz', 'Maurer', 'Schmitt', 'Haas', 'Ott', 'Schwabe', 'Bender', 'García', 'Martínez', 'López', 'Hernández', 'Pérez', 'González', 'Rodríguez', 'Sánchez', 'Ramírez', 'Flores',
'Gutiérrez', 'Jiménez', 'Díaz', 'Vázquez', 'Morales', 'Cruz', 'Mendoza', 'Reyes', 'Castro', 'García',
'Martín', 'Ruiz', 'Torres', 'Álvarez', 'Jiménez', 'Vega', 'Ríos', 'Salazar', 'Paredes', 'Márquez',
'Navarro', 'Herrera', 'Moreno', 'Fernández', 'Gómez', 'Molina', 'González', 'Ramón', 'Solís', 'Domínguez',
'Vázquez', 'Vera', 'Rivas', 'Castaño', 'Ávila', 'Gálvez', 'Camacho', 'Pérez', 'López', 'Cordero', 'Rossi', 'Bianchi', 'Romano', 'Ricci', 'Marino', 'Greco', 'Conti', 'Lombardi', 'Ferrari', 'Esposito',
'Santoro', 'De Luca', 'Mancini', 'Giordano', 'Moretti', 'Gallo', 'Longo', 'Giovanni', 'Martino', 'Rinaldi',
'Martini', 'Barbieri', 'Costa', 'Angelo', 'Ferrara', 'Coppola', 'Sanna', 'Cammarota', 'Caputo', 'Caruso',
'Luciano', 'Valenti', 'Pugliese', 'De Santis', 'Della Valle', 'De Marco', 'Lombardi', 'Ferri', 'Cavaliere',
'Aurora', 'Basso', 'Vitali', 'Siciliano', 'Vitale', 'Bellini', 'Motta', 'Sorrentino', 'Trombetta', 'Petrillo', 'Silva', 'Santos', 'Pereira', 'Oliveira', 'Ferreira', 'Costa', 'Rodrigues', 'Almeida', 'Sousa', 'Martins',
'Fernandes', 'Carvalho', 'Nascimento', 'Ribeiro', 'Mendes', 'Teixeira', 'Lima', 'Gomes', 'Castro', 'Moura',
'Azevedo', 'Sousa', 'Pinto', 'Dias', 'Campos', 'Silveira', 'Martins', 'Cardoso', 'Machado', 'Cunha',
'Monteiro', 'Barbosa', 'Correia', 'Tavares', 'Duarte', 'Figueiredo', 'Brito', 'Lopes', 'Sousa', 'Santos',
'Ferreira', 'Morais', 'Alves', 'Cavalcante', 'Borges', 'Marques', 'Furtado', 'Franco', 'Gonçalves', 'Adams', 'Allen', 'Bennett', 'Bishop', 'Black', 'Blake', 'Booth', 'Bradley', 'Brooks', 'Brown',
'Burns', 'Butler', 'Chapman', 'Chambers', 'Clarke', 'Clayton', 'Cole', 'Collins', 'Cooper', 'Curtis',
'Davis', 'Dixon', 'Douglas', 'Ferguson', 'Fletcher', 'Ford', 'Gibson', 'Glover', 'Grant', 'Gray',
'Greenwood', 'Hancock', 'Harrison', 'Harvey', 'Hughes', 'Jackson', 'James', 'Johnston', 'Kingston', 'Knight',
'Lawrence', 'Lawson', 'Lee', 'Lloyd', 'Mason', 'Miller', 'Mitchell', 'Moore', 'Morgan', 'Morris',
'Nelson', 'Owen', 'Parker', 'Patterson', 'Phillips', 'Robinson'];
    
    const meleeItems = ['Fists', 'Sword', 'Axe', 'Dagger', 'Spear', 'Mace', 'Hammer', 'Flail', 'Katana', 'Scythe', 'Whip', 'Claws', 'Club', 'Halberd', 'Greatsword', 'Battleaxe', 'Shortsword', 'Trident', 'Javelin', 'Saber', 'Pike', 'Rapier', 'Morningstar', 'Falchion', 'Gladius', 'Bastard Sword', 'Claymore', 'Runic Greatsword', 'Dragonbone Sword', 'Stormbreaker Axe', 'Wyrmsbane Pike', 'Thunderstrike Mace', 'Grim Reaper Scythe', 'Basic Wood Sword', 'Sturdy Wood Sword', 'Well-Made Wood Sword', 'Masterwork Wood Sword', 'Exquisite Wood Sword', 'Runed Wood Sword', 'Enchanted Wood Sword', 'Arcane-Infused Wood Sword', 'Divine Wood Sword', 'Mythic Wood Sword',
'Basic Iron Sword', 'Sturdy Iron Sword', 'Well-Made Iron Sword', 'Masterwork Iron Sword', 'Exquisite Iron Sword', 'Runed Iron Sword', 'Enchanted Iron Sword', 'Arcane-Infused Iron Sword', 'Divine Iron Sword', 'Mythic Iron Sword',
'Basic Steel Sword', 'Sturdy Steel Sword', 'Well-Made Steel Sword', 'Masterwork Steel Sword', 'Exquisite Steel Sword', 'Runed Steel Sword', 'Enchanted Steel Sword', 'Arcane-Infused Steel Sword', 'Divine Steel Sword', 'Mythic Steel Sword',
'Basic Bronze Sword', 'Sturdy Bronze Sword', 'Well-Made Bronze Sword', 'Masterwork Bronze Sword', 'Exquisite Bronze Sword', 'Runed Bronze Sword', 'Enchanted Bronze Sword', 'Arcane-Infused Bronze Sword', 'Divine Bronze Sword', 'Mythic Bronze Sword',
'Basic Silver Sword', 'Sturdy Silver Sword', 'Well-Made Silver Sword', 'Masterwork Silver Sword', 'Exquisite Silver Sword', 'Runed Silver Sword', 'Enchanted Silver Sword', 'Arcane-Infused Silver Sword', 'Divine Silver Sword', 'Mythic Silver Sword',
'Basic Mithril Sword', 'Sturdy Mithril Sword', 'Well-Made Mithril Sword', 'Masterwork Mithril Sword', 'Exquisite Mithril Sword', 'Runed Mithril Sword', 'Enchanted Mithril Sword', 'Arcane-Infused Mithril Sword', 'Divine Mithril Sword', 'Mythic Mithril Sword',
'Basic Adamantium Sword', 'Sturdy Adamantium Sword', 'Well-Made Adamantium Sword', 'Masterwork Adamantium Sword', 'Exquisite Adamantium Sword', 'Runed Adamantium Sword', 'Enchanted Adamantium Sword', 'Arcane-Infused Adamantium Sword', 'Divine Adamantium Sword', 'Mythic Adamantium Sword',
'Basic Dragonbone Sword', 'Sturdy Dragonbone Sword', 'Well-Made Dragonbone Sword', 'Masterwork Dragonbone Sword', 'Exquisite Dragonbone Sword', 'Runed Dragonbone Sword', 'Enchanted Dragonbone Sword', 'Arcane-Infused Dragonbone Sword', 'Divine Dragonbone Sword', 'Mythic Dragonbone Sword',
'Basic Celestial Ore Sword', 'Sturdy Celestial Ore Sword', 'Well-Made Celestial Ore Sword', 'Masterwork Celestial Ore Sword', 'Exquisite Celestial Ore Sword', 'Runed Celestial Ore Sword', 'Enchanted Celestial Ore Sword', 'Arcane-Infused Celestial Ore Sword', 'Divine Celestial Ore Sword', 'Mythic Celestial Ore Sword',
'Basic Orichalcum Sword', 'Sturdy Orichalcum Sword', 'Well-Made Orichalcum Sword', 'Masterwork Orichalcum Sword', 'Exquisite Orichalcum Sword', 'Runed Orichalcum Sword', 'Enchanted Orichalcum Sword', 'Arcane-Infused Orichalcum Sword', 'Divine Orichalcum Sword', 'Mythic Orichalcum Sword', 'Basic Wood Axe', 'Sturdy Wood Axe', 'Well-Made Wood Axe', 'Masterwork Wood Axe', 'Exquisite Wood Axe', 'Runed Wood Axe', 'Enchanted Wood Axe', 'Arcane-Infused Wood Axe', 'Divine Wood Axe', 'Mythic Wood Axe',
'Basic Iron Axe', 'Sturdy Iron Axe', 'Well-Made Iron Axe', 'Masterwork Iron Axe', 'Exquisite Iron Axe', 'Runed Iron Axe', 'Enchanted Iron Axe', 'Arcane-Infused Iron Axe', 'Divine Iron Axe', 'Mythic Iron Axe',
'Basic Steel Axe', 'Sturdy Steel Axe', 'Well-Made Steel Axe', 'Masterwork Steel Axe', 'Exquisite Steel Axe', 'Runed Steel Axe', 'Enchanted Steel Axe', 'Arcane-Infused Steel Axe', 'Divine Steel Axe', 'Mythic Steel Axe',
'Basic Bronze Axe', 'Sturdy Bronze Axe', 'Well-Made Bronze Axe', 'Masterwork Bronze Axe', 'Exquisite Bronze Axe', 'Runed Bronze Axe', 'Enchanted Bronze Axe', 'Arcane-Infused Bronze Axe', 'Divine Bronze Axe', 'Mythic Bronze Axe',
'Basic Silver Axe', 'Sturdy Silver Axe', 'Well-Made Silver Axe', 'Masterwork Silver Axe', 'Exquisite Silver Axe', 'Runed Silver Axe', 'Enchanted Silver Axe', 'Arcane-Infused Silver Axe', 'Divine Silver Axe', 'Mythic Silver Axe',
'Basic Mithril Axe', 'Sturdy Mithril Axe', 'Well-Made Mithril Axe', 'Masterwork Mithril Axe', 'Exquisite Mithril Axe', 'Runed Mithril Axe', 'Enchanted Mithril Axe', 'Arcane-Infused Mithril Axe', 'Divine Mithril Axe', 'Mythic Mithril Axe',
'Basic Adamantium Axe', 'Sturdy Adamantium Axe', 'Well-Made Adamantium Axe', 'Masterwork Adamantium Axe', 'Exquisite Adamantium Axe', 'Runed Adamantium Axe', 'Enchanted Adamantium Axe', 'Arcane-Infused Adamantium Axe', 'Divine Adamantium Axe', 'Mythic Adamantium Axe',
'Basic Dragonbone Axe', 'Sturdy Dragonbone Axe', 'Well-Made Dragonbone Axe', 'Masterwork Dragonbone Axe', 'Exquisite Dragonbone Axe', 'Runed Dragonbone Axe', 'Enchanted Dragonbone Axe', 'Arcane-Infused Dragonbone Axe', 'Divine Dragonbone Axe', 'Mythic Dragonbone Axe',
'Basic Celestial Ore Axe', 'Sturdy Celestial Ore Axe', 'Well-Made Celestial Ore Axe', 'Masterwork Celestial Ore Axe', 'Exquisite Celestial Ore Axe', 'Runed Celestial Ore Axe', 'Enchanted Celestial Ore Axe', 'Arcane-Infused Celestial Ore Axe', 'Divine Celestial Ore Axe', 'Mythic Celestial Ore Axe',
'Basic Orichalcum Axe', 'Sturdy Orichalcum Axe', 'Well-Made Orichalcum Axe', 'Masterwork Orichalcum Axe', 'Exquisite Orichalcum Axe', 'Runed Orichalcum Axe', 'Enchanted Orichalcum Axe', 'Arcane-Infused Orichalcum Axe', 'Divine Orichalcum Axe', 'Mythic Orichalcum Axe', 'Basic Wood Mace', 'Sturdy Wood Mace', 'Well-Made Wood Mace', 'Masterwork Wood Mace', 'Exquisite Wood Mace', 'Runed Wood Mace', 'Enchanted Wood Mace', 'Arcane-Infused Wood Mace', 'Divine Wood Mace', 'Mythic Wood Mace',
'Basic Iron Mace', 'Sturdy Iron Mace', 'Well-Made Iron Mace', 'Masterwork Iron Mace', 'Exquisite Iron Mace', 'Runed Iron Mace', 'Enchanted Iron Mace', 'Arcane-Infused Iron Mace', 'Divine Iron Mace', 'Mythic Iron Mace',
'Basic Steel Mace', 'Sturdy Steel Mace', 'Well-Made Steel Mace', 'Masterwork Steel Mace', 'Exquisite Steel Mace', 'Runed Steel Mace', 'Enchanted Steel Mace', 'Arcane-Infused Steel Mace', 'Divine Steel Mace', 'Mythic Steel Mace', 'Basic Bronze Mace', 'Sturdy Bronze Mace', 'Well-Made Bronze Mace', 'Masterwork Bronze Mace', 'Exquisite Bronze Mace', 'Runed Bronze Mace', 'Enchanted Bronze Mace', 'Arcane-Infused Bronze Mace', 'Divine Bronze Mace', 'Mythic Bronze Mace', 'Basic Silver Mace', 'Sturdy Silver Mace', 'Well-Made Silver Mace', 'Masterwork Silver Mace', 'Exquisite Silver Mace', 'Runed Silver Mace', 'Enchanted Silver Mace', 'Arcane-Infused Silver Mace', 'Divine Silver Mace', 'Mythic Silver Mace', 'Basic Mithril Mace', 'Sturdy Mithril Mace', 'Well-Made Mithril Mace', 'Masterwork Mithril Mace', 'Exquisite Mithril Mace', 'Runed Mithril Mace', 'Enchanted Mithril Mace', 'Arcane-Infused Mithril Mace', 'Divine Mithril Mace', 'Mythic Mithril Mace', 'Basic Adamantium Mace', 'Sturdy Adamantium Mace', 'Well-Made Adamantium Mace', 'Masterwork Adamantium Mace', 'Exquisite Adamantium Mace', 'Runed Adamantium Mace', 'Enchanted Adamantium Mace', 'Arcane-Infused Adamantium Mace', 'Divine Adamantium Mace', 'Mythic Adamantium Mace',
'Basic Dragonbone Mace', 'Sturdy Dragonbone Mace', 'Well-Made Dragonbone Mace', 'Masterwork Dragonbone Mace', 'Exquisite Dragonbone Mace', 'Runed Dragonbone Mace', 'Enchanted Dragonbone Mace', 'Arcane-Infused Dragonbone Mace', 'Divine Dragonbone Mace', 'Mythic Dragonbone Mace',
'Basic Celestial Ore Mace', 'Sturdy Celestial Ore Mace', 'Well-Made Celestial Ore Mace', 'Masterwork Celestial Ore Mace', 'Exquisite Celestial Ore Mace', 'Runed Celestial Ore Mace', 'Enchanted Celestial Ore Mace', 'Arcane-Infused Celestial Ore Mace', 'Divine Celestial Ore Mace', 'Mythic Celestial Ore Mace', 'Basic Orichalcum Mace', 'Sturdy Orichalcum Mace', 'Well-Made Orichalcum Mace', 'Masterwork Orichalcum Mace', 'Exquisite Orichalcum Mace', 'Runed Orichalcum Mace', 'Enchanted Orichalcum Mace', 'Arcane-Infused Orichalcum Mace', 'Divine Orichalcum Mace', 'Mythic Orichalcum Mace', 'Basic Wood Longsword', 'Sturdy Wood Longsword', 'Well-Made Wood Longsword', 'Masterwork Wood Longsword', 'Exquisite Wood Longsword', 'Runed Wood Longsword', 'Enchanted Wood Longsword', 'Arcane-Infused Wood Longsword', 'Divine Wood Longsword', 'Mythic Wood Longsword', 'Basic Iron Longsword', 'Sturdy Iron Longsword', 'Well-Made Iron Longsword', 'Masterwork Iron Longsword', 'Exquisite Iron Longsword', 'Runed Iron Longsword', 'Enchanted Iron Longsword', 'Arcane-Infused Iron Longsword', 'Divine Iron Longsword', 'Mythic Iron Longsword', 'Basic Steel Longsword', 'Sturdy Steel Longsword', 'Well-Made Steel Longsword', 'Masterwork Steel Longsword', 'Exquisite Steel Longsword', 'Runed Steel Longsword', 'Enchanted Steel Longsword', 'Arcane-Infused Steel Longsword', 'Divine Steel Longsword', 'Mythic Steel Longsword',
'Basic Bronze Longsword', 'Sturdy Bronze Longsword', 'Well-Made Bronze Longsword', 'Masterwork Bronze Longsword', 'Exquisite Bronze Longsword', 'Runed Bronze Longsword', 'Enchanted Bronze Longsword', 'Arcane-Infused Bronze Longsword', 'Divine Bronze Longsword', 'Mythic Bronze Longsword', 'Basic Silver Longsword', 'Sturdy Silver Longsword', 'Well-Made Silver Longsword', 'Masterwork Silver Longsword', 'Exquisite Silver Longsword', 'Runed Silver Longsword', 'Enchanted Silver Longsword', 'Arcane-Infused Silver Longsword', 'Divine Silver Longsword', 'Mythic Silver Longsword',
'Basic Mithril Longsword', 'Sturdy Mithril Longsword', 'Well-Made Mithril Longsword', 'Masterwork Mithril Longsword', 'Exquisite Mithril Longsword', 'Runed Mithril Longsword', 'Enchanted Mithril Longsword', 'Arcane-Infused Mithril Longsword', 'Divine Mithril Longsword', 'Mythic Mithril Longsword', 'Basic Adamantium Longsword', 'Sturdy Adamantium Longsword', 'Well-Made Adamantium Longsword', 'Masterwork Adamantium Longsword', 'Exquisite Adamantium Longsword', 'Runed Adamantium Longsword', 'Enchanted Adamantium Longsword', 'Arcane-Infused Adamantium Longsword', 'Divine Adamantium Longsword', 'Mythic Adamantium Longsword', 'Basic Dragonbone Longsword', 'Sturdy Dragonbone Longsword', 'Well-Made Dragonbone Longsword', 'Masterwork Dragonbone Longsword', 'Exquisite Dragonbone Longsword', 'Runed Dragonbone Longsword', 'Enchanted Dragonbone Longsword', 'Arcane-Infused Dragonbone Longsword', 'Divine Dragonbone Longsword', 'Mythic Dragonbone Longsword', 'Basic Celestial Ore Longsword', 'Sturdy Celestial Ore Longsword', 'Well-Made Celestial Ore Longsword', 'Masterwork Celestial Ore Longsword', 'Exquisite Celestial Ore Longsword', 'Runed Celestial Ore Longsword', 'Enchanted Celestial Ore Longsword', 'Arcane-Infused Celestial Ore Longsword', 'Divine Celestial Ore Longsword', 'Mythic Celestial Ore Longsword', 'Basic Orichalcum Longsword', 'Sturdy Orichalcum Longsword', 'Well-Made Orichalcum Longsword', 'Masterwork Orichalcum Longsword', 'Exquisite Orichalcum Longsword', 'Runed Orichalcum Longsword', 'Enchanted Orichalcum Longsword', 'Arcane-Infused Orichalcum Longsword', 'Divine Orichalcum Longsword', 'Mythic Orichalcum Longsword'];
    const rangedItems = ['Bow', 'Longbow', 'Crossbow', 'Sling', 'Throwing Knives', 'Chakram', 'Phoenix Feather Bow', 'Eternal Bow', 'Dragonfire Bow', 'Moonlit Precision Bow', 'Starfall Arrows'];
    const magicItems = ['Wand', 'Staff of Fire', 'Flame Tongue Lasso', 'Arcane Staff', 'Doomsday Staff', 'Vortex Orb', 'Soulbind Lasso', 'Celestial Tear', 'Arcane Stone', 'Lightbringer Staff', 'Elemental Convergence Staff', 'Frozen Flame Ritual Staff', 'Frostveil Grimoire', 'Void Staff', 'Sunstone Orb', 'Spectral Shield'];
    const shields = ['Wooden Shield', 'Iron Shield', 'Tower Shield', 'Dragonbone Shield', 'Kite Shield', 'Round Shield'];
    const randomValue = Math.random();
    let totalTarget;

    // Rare case logic for total target
if (randomValue < 0.0001) {  // 1 in 10,000 for total 200+
    totalTarget = Math.floor(Math.random() * 21 + 200);  // 200-220 range
} else if (randomValue < 0.0005) {  // 1 in 2,000 for total 180-199
    totalTarget = Math.floor(Math.random() * 20 + 180);  // 180-199 range
} else if (randomValue < 0.001) {  // 1 in 1,000 for total 150-179
    totalTarget = Math.floor(Math.random() * 30 + 150);  // 150-179 range
} else if (randomValue < 0.005) {  // 1 in 200 for total 120-149
    totalTarget = Math.floor(Math.random() * 30 + 120);  // 120-149 range
} else if (randomValue < 0.01) {  // 1 in 100 for total 100-119
    totalTarget = Math.floor(Math.random() * 20 + 100);  // 100-119 range
} else if (randomValue < 0.05) {  // 1 in 20 for total 90-99
    totalTarget = Math.floor(Math.random() * 10 + 90);  // 90-99 range
} else if (randomValue < 0.10) {  // 1 in 10 for total 80-89
    totalTarget = Math.floor(Math.random() * 10 + 80);  // 80-89 range
} else if (randomValue < 0.15) {  // 1 in 6.7 for total 75-79
    totalTarget = Math.floor(Math.random() * 5 + 75);  // 75-79 range
} else if (randomValue < 0.25) {  // 1 in 4 for total 70-74
    totalTarget = Math.floor(Math.random() * 5 + 70);  // 70-74 range
} else {  // Most common range 60-69 (E to F range)
    totalTarget = Math.floor(Math.random() * 10 + 60);  // 60-69 range
	    }

let remaining = totalTarget;

// Subtract locked field values from the total
const lockedValues = fields.map((field) => {
    if (isLocked(field)) {
        const value = parseInt(document.getElementById(field).value, 10) || 0;
        remaining -= value; // Deduct locked field values from the remaining total
        return value;
    }
    return 0;
});

const unlockedFields = fields.filter((field, index) => !isLocked(field));
let values = [];

// Get the race and define the race focus
const race = document.getElementById("race").value;
const raceFocus = {
    Human: null, // Balanced distribution
    Elf: ["dexterity", "intelligence"],
    Dwarf: ["constitution", "resolve"],
    Orc: ["strength", "constitution"],
    Halfling: ["dexterity", "perception"],
    Goliath: ["strength", "constitution"],
    Changeling: ["dexterity", "intelligence"],
    Goblin: ["dexterity", "resolve"],
    Kobold: ["dexterity", "perception"],
    Animalfolk: null // Balanced distribution for now
};

// Determine whether to use race-specific focus (80%) or balanced distribution (20%)
const focusStats = raceFocus[race] || null;
const useRaceFocus = focusStats && Math.random() < 0.8;

if (totalTarget >= 70) {
    // Old logic (close stats) has a 30% chance
    const useOldLogic = Math.random() < 0.0001;

    if (useOldLogic) {
        // Old logic: Stats close together, within 8 to 12
        values = Array(unlockedFields.length).fill(0);

        // Start with a base random value between 8 and 12 for each stat
        let baseValues = unlockedFields.map(() => Math.floor(Math.random() * 5) + 8); // Random values between 8 and 12
        let baseTotal = baseValues.reduce((sum, val) => sum + val, 0);

        // Adjust proportions to match the totalTarget
        let adjustmentFactor = (remaining + baseTotal) / baseTotal;

        baseValues = baseValues.map((value) => Math.round(value * adjustmentFactor));
        remaining = remaining + baseTotal - baseValues.reduce((sum, val) => sum + val, 0);

        // Assign adjusted base values
        baseValues.forEach((val, index) => {
            values[index] = val;
        });

        // Distribute any leftover points randomly
        while (remaining > 0) {
            const randomIndex = Math.floor(Math.random() * unlockedFields.length);
            values[randomIndex] += 1;
            remaining -= 1;
        }
    } else if (useRaceFocus) {
	 console.log(`Using race-specific logic for ${race}. Focus stats: ${focusStats.join(", ")}`);
    // Race-specific focus distribution
    values = Array(unlockedFields.length).fill(10); // Initialize all stats to 10

    // Assign points to focus stats
    const focusIndices = focusStats.map((stat) => unlockedFields.indexOf(stat)).filter((i) => i !== -1);
    const primaryFocus = focusIndices[0];
    const secondaryFocus = focusIndices[1] || null;

    // Calculate remaining points after setting non-focus stats to 10
    remaining -= values.reduce((sum, val) => sum + val, 0);

    // Allocate remaining points to focus stats
    const primaryPoints = Math.floor(remaining * (Math.random() * 0.4 + 0.4)); // Allocate 40–80% to primary focus
    const secondaryPoints = secondaryFocus
        ? Math.floor(remaining * (Math.random() * 0.2 + 0.1)) // Allocate 10–30% to secondary focus
        : 0;

    if (primaryFocus !== undefined) values[primaryFocus] += primaryPoints;
    if (secondaryFocus !== null) values[secondaryFocus] += secondaryPoints;

    remaining -= primaryPoints + secondaryPoints;

    // Distribute remaining points randomly among other stats
    while (remaining > 0) {
        const randomIndex = Math.floor(Math.random() * unlockedFields.length);
        if (randomIndex !== primaryFocus && randomIndex !== secondaryFocus) {
            values[randomIndex] += 1; // Only distribute to non-focus stats
            remaining -= 1;
        }
		}
    } else {
	console.log(`Using balanced logic for ${race} (default human-like distribution).`);
        // Default balanced logic for humans
        values = Array(unlockedFields.length).fill(0);

        values = values.map(() => Math.floor(Math.random() * 5) + 8); // Random values between 8 and 12
        remaining -= values.reduce((sum, val) => sum + val, 0);

        while (remaining > 0) {
            const randomIndex = Math.floor(Math.random() * unlockedFields.length);
            values[randomIndex] += 1;
            remaining -= 1;
        }
    }
} else {
    // For lower tiers: Use the existing two logic approaches
    const useNewLogic = Math.random() < 0.5; // 50% chance

    // Distribute remaining total among unlocked fields
    for (let i = 0; i < unlockedFields.length; i++) {
        let allocation;

        if (useNewLogic) {
            // New logic: allocate at least 3 points to each field
            allocation = 
                i === unlockedFields.length - 1
                    ? remaining // Assign the rest to the last field
                    : Math.max(3, Math.floor(Math.random() * (remaining / (unlockedFields.length - i))));
        } else {
            // Old logic: keep values close to 10
            allocation = 
                i === unlockedFields.length - 1
                    ? remaining // Assign the rest to the last field
                    : Math.min(
                        10 + Math.floor(Math.random() * 3 - 1), // Close to 10 (-1, 0, +1)
                        remaining - (unlockedFields.length - i - 1) * 8 // Ensure remaining fields get at least ~8
                    );
        }

        values.push(allocation);
        remaining -= allocation;
    }
}

// Shuffle values for randomness
values = values.sort(() => Math.random() - 0.5);

// Assign values to unlocked fields
unlockedFields.forEach((field, index) => {
    document.getElementById(field).value = values[index];
});


    // Calculate total including locked fields
const total = lockedValues.reduce((sum, val) => sum + val, 0) + values.reduce((sum, val) => sum + val, 0);
let rating = "F";
if (total >= 200) rating = "EX";
else if (total >= 180) rating = "SSS";
else if (total >= 150) rating = "SS";
else if (total >= 120) rating = "S";
else if (total >= 100) rating = "A";
else if (total >= 80) rating = "B";
else if (total >= 75) rating = "C";
else if (total >= 70) rating = "D";
else if (total >= 65) rating = "E";
else rating = "F";

    document.getElementById("potentialDisplay").innerText = `${total} (${rating})`;

    // Update ratings for each field
    fields.forEach((field) => {
        const fieldValue = parseInt(document.getElementById(field).value, 10) || 0;
        let fieldRating = "F";
        if (fieldValue >= 22) fieldRating = "S";
        else if (fieldValue >= 20) fieldRating = "A";
        else if (fieldValue >= 18) fieldRating = "B";
        else if (fieldValue >= 16) fieldRating = "C";
        else if (fieldValue >= 14) fieldRating = "D";
        else if (fieldValue >= 10) fieldRating = "E";

        document.getElementById(`${field}Rating`).innerText = `${fieldRating}`;
    });
    // Randomize specific options for fields
    if (!isLocked('thirst')) document.getElementById('thirst').value = thirstyOptions[Math.floor(Math.random() * thirstyOptions.length)];
    if (!isLocked('rest')) document.getElementById('rest').value = restOptions[Math.floor(Math.random() * restOptions.length)];
    if (!isLocked('pain')) document.getElementById('pain').value = painOptions[Math.floor(Math.random() * painOptions.length)];
    if (!isLocked('hunger')) document.getElementById('hunger').value = hungerOptions[Math.floor(Math.random() * hungerOptions.length)];
    if (!isLocked('heat')) document.getElementById('heat').value = heatOptions[Math.floor(Math.random() * heatOptions.length)];
    if (!isLocked('lighting')) document.getElementById('lighting').value = lightingOptions[Math.floor(Math.random() * lightingOptions.length)];
    if (!isLocked('weather')) document.getElementById('weather').value = weatherOptions[Math.floor(Math.random() * weatherOptions.length)];
    if (!isLocked('moon')) document.getElementById('moon').value = moonOptions[Math.floor(Math.random() * moonOptions.length)];
    if (!isLocked('wind')) document.getElementById('wind').value = windOptions[Math.floor(Math.random() * windOptions.length)];
    if (!isLocked('temperature')) document.getElementById('temperature').value = temperatureOptions[Math.floor(Math.random() * temperatureOptions.length)];
    // Randomize date and time separately (checking lock)
    if (!isLocked('date')) {
        const months = ['Winter', 'Spring', 'Summer', 'Fall'];
        const days = Math.floor(Math.random() * 365) + 1;
        document.getElementById('date').value = `${months[Math.floor(Math.random() * 4)]}, day ${days}`;
    }

    if (!isLocked('time')) {
        const hours = Math.floor(Math.random() * 24);
        const minutes = Math.floor(Math.random() * 60);
        const seconds = Math.floor(Math.random() * 60);
        document.getElementById('time').value = `${hours}:${minutes}:${seconds}`;
    }

    // Randomize place, first name, and last name, if unlocked
    if (!isLocked('place')) document.getElementById('place').value = placeOptions[Math.floor(Math.random() * placeOptions.length)];
    if (!isLocked('firstName')) document.getElementById('firstName').value = firstNames[Math.floor(Math.random() * firstNames.length)];
    if (!isLocked('lastName')) document.getElementById('lastName').value = lastNames[Math.floor(Math.random() * lastNames.length)];
  
  // Randomize combat details
    randomizeCombatDetails();
  
if (!isLocked('wieldLHand') && !isLocked('wieldRHand')) {
    const noOffhandChance = Math.random(); // 90% chance for no offhand

    if (document.getElementById('combatStyle').value === "Melee") {
        const mainHandWeapon = meleeItems[Math.floor(Math.random() * meleeItems.length)];
        document.getElementById('wieldLHand').value = mainHandWeapon;

        // Check if weapon name includes "longsword" or similar
        if (mainHandWeapon.toLowerCase().includes('longsword')) {
            // No shield if it's a longsword
            document.getElementById('wieldRHand').value = "nothing";
        } else {
            // 40% chance for having an offhand equipped
            if (Math.random() < 0.4) {
                const offhandTypeChance = Math.random();

                if (offhandTypeChance < 0.7) {
                    // 70% chance for a shield
                    document.getElementById('wieldRHand').value = shields[Math.floor(Math.random() * shields.length)];
                } else if (offhandTypeChance < 0.9) {
                    // 20% chance for a melee item
                    document.getElementById('wieldRHand').value = meleeItems[Math.floor(Math.random() * meleeItems.length)];
                } else {
                    // 10% chance for no offhand
                    document.getElementById('wieldRHand').value = "nothing";
                }
            } else {
                // 60% chance for no offhand
                document.getElementById('wieldRHand').value = "nothing";
            }
        }
    } else if (document.getElementById('combatStyle').value === "Ranged") {
        document.getElementById('wieldLHand').value = rangedItems[Math.floor(Math.random() * rangedItems.length)];
        document.getElementById('wieldRHand').value = noOffhandChance < 0.9 ? "nothing" : rangedItems[Math.floor(Math.random() * rangedItems.length)];
    } else if (document.getElementById('combatStyle').value === "Magic") {
        document.getElementById('wieldLHand').value = magicItems[Math.floor(Math.random() * magicItems.length)];
        document.getElementById('wieldRHand').value = magicItems[Math.floor(Math.random() * magicItems.length)];
    }
} else if (isLocked('wieldLHand') && isLocked('wieldRHand')) {
    // Adjust combat style to match locked weapons
    const wieldLHand = document.getElementById('wieldLHand').value.toLowerCase();
    const wieldRHand = document.getElementById('wieldRHand').value.toLowerCase();

    if (meleeItems.some(item => wieldLHand.includes(item.toLowerCase())) &&
        meleeItems.some(item => wieldRHand.includes(item.toLowerCase()))) {
        document.getElementById('combatStyle').value = "Melee";
    } else if (rangedItems.some(item => wieldLHand.includes(item.toLowerCase())) &&
        rangedItems.some(item => wieldRHand.includes(item.toLowerCase()))) {
        document.getElementById('combatStyle').value = "Ranged";
    } else if (magicItems.some(item => wieldLHand.includes(item.toLowerCase())) &&
        magicItems.some(item => wieldRHand.includes(item.toLowerCase()))) {
        document.getElementById('combatStyle').value = "Magic";
    }
} else if (!isLocked('wieldLHand')) {
    // If only the left hand is unlocked, randomize based on combat style
    if (document.getElementById('combatStyle').value === "Melee") {
        document.getElementById('wieldLHand').value = meleeItems[Math.floor(Math.random() * meleeItems.length)];
    } else if (document.getElementById('combatStyle').value === "Ranged") {
        document.getElementById('wieldLHand').value = rangedItems[Math.floor(Math.random() * rangedItems.length)];
    } else if (document.getElementById('combatStyle').value === "Magic") {
        document.getElementById('wieldLHand').value = magicItems[Math.floor(Math.random() * magicItems.length)];
    }
} else if (!isLocked('wieldRHand')) {
    // If only the right hand is unlocked, randomize based on combat style
    if (document.getElementById('combatStyle').value === "Melee") {
        document.getElementById('wieldRHand').value = meleeItems[Math.floor(Math.random() * meleeItems.length)];
    } else if (document.getElementById('combatStyle').value === "Ranged") {
        document.getElementById('wieldRHand').value = rangedItems[Math.floor(Math.random() * rangedItems.length)];
    } else if (document.getElementById('combatStyle').value === "Magic") {
        document.getElementById('wieldRHand').value = magicItems[Math.floor(Math.random() * magicItems.length)];
    }
    
    // Resize all inputs after randomization
    resizeAllInputs();


// Attach resizeInput to all inputs for manual changes
document.querySelectorAll('input[type="text"], input[type="number"]').forEach(input => {
    input.addEventListener('input', () => resizeInput(input));
});

// Call resizeInput after updating each field programmatically in randomizeStatus or other functions
resizeAllInputs();


    // Trigger a reflow to make sure the value is rendered
            input.offsetHeight; // This forces a reflow

            resizeInput(input); // Resize input after randomization
        ;
 
   
}
}
function randomizeRace() {
    const races = [
        { name: "Human", traits: [] },
        { name: "Elf", traits: getElfTraits() },
        { name: "Dwarf", traits: getDwarfTraits() },
        { name: "Orc", traits: getOrcTraits() },
        { name: "Halfling", traits: getHalflingTraits() },
        { name: "Goliath", traits: getGoliathTraits() },
        { name: "Changeling", traits: getChangelingTraits() },
        { name: "Goblin", traits: getGoblinTraits() },
        { name: "Kobold", traits: getKoboldTraits() },
        { name: "Animalfolk", traits: getAnimalfolkTraits() }
    ];

    // Randomly select a race
    const selectedRace = races[Math.floor(Math.random() * races.length)];

    // Set race in the character info
    document.getElementById('race').value = selectedRace.name;

    // Display traits in the status display
    const raceTraits = selectedRace.traits.length > 0 ? selectedRace.traits.join(", ") : "None";
    document.getElementById('appearanceTraits').innerText = `${raceTraits}`;
}

// Helper functions to handle trait selection for races

function getElfTraits() {
    const earTypes = ["Long ears", "Pointed ears", "Slightly curved ears"];
    const ear = earTypes[Math.floor(Math.random() * earTypes.length)];
    return [ear];
}

function getDwarfTraits() {
    const beardStyles = ["Braided beard", "Short beard", "Full beard", "Goatee", "Moustache"];
    const beard = beardStyles[Math.floor(Math.random() * beardStyles.length)];
    return [beard];
}

function getOrcTraits() {
    const tuskSizes = ["Small tusks", "Large tusks", "Curved tusks"];
    const tusks = tuskSizes[Math.floor(Math.random() * tuskSizes.length)];
    return [tusks];
}

function getHalflingTraits() {
    const footSizes = ["Short feet", "Large feet"];
    const footSize = footSizes[Math.floor(Math.random() * footSizes.length)];
    return [footSize];
}

function getGoliathTraits() {
    const skinTypes = ["Tribal tattoos"];
    const skinType = skinTypes[Math.floor(Math.random() * skinTypes.length)];
	const skinAccess = ["Lithoderms"];
    const skinAccesse = skinAccess[Math.floor(Math.random() * skinAccess.length)];
    return [skinType, skinAccesse];
}

function getChangelingTraits() {
    const forms = ["Indistinct Face"];
    const form = forms[Math.floor(Math.random() * forms.length)];
    return [form];
}

function getGoblinTraits() {
    const earTypes = ["Bat-like ears", "Pointed ears", "Round ears"];
    const ears = earTypes[Math.floor(Math.random() * earTypes.length)];
    return [ears];
}

function getKoboldTraits() {
    const scaleTypes = ["Lizard scales", "Dragon scales", "Reptilian scales"];
    const tailTypes = ["Long tail", "Spiked tail", "Barbed tail"];
    const scaleType = scaleTypes[Math.floor(Math.random() * scaleTypes.length)];
    const tail = tailTypes[Math.floor(Math.random() * tailTypes.length)];
    return [scaleType, tail];
}

function getAnimalfolkTraits() {
    const animalTypes = ["Wolf features", "Cat features", "Bear features"];
    const earTypes = ["Pointed ears", "Fluffy ears"];
    const animalType = animalTypes[Math.floor(Math.random() * animalTypes.length)];
    const earType = earTypes[Math.floor(Math.random() * earTypes.length)];
    return [animalType, earType];
}
function randomizePhysicalAppearance() {
    // Check if inputs are unlocked before randomizing
    if (lockedInputs['bloodType'] && lockedInputs['skinColor'] && lockedInputs['leftEyeColor'] && lockedInputs['rightEyeColor'] && lockedInputs['hairColor'] && lockedInputs['hairStyle']) {
        return; // If all inputs are locked, do nothing
    }

    const race = document.getElementById('race').value;

    // Define race-specific traits
    const raceTraits = {
        Human: {
            skinColors: ['Fair', 'Light', 'Medium', 'Olive', 'Tan', 'Brown', 'Dark Brown', 'Ebony'],
            hairColors: ['Black', 'Brown', 'Blonde', 'Red', 'Gray', 'White'],
            eyeColors: ['Brown', 'Blue', 'Green', 'Hazel', 'Gray'],
            hairStyles: ['Short', 'Medium', 'Long', 'Curly', 'Straight']
        },
        Elf: {
            skinColors: ['Fair', 'Light', 'Porcelain', 'Ivory', 'Grey', 'Black'],
            hairColors: ['White', 'Blonde', 'Silver', 'Black'],
            eyeColors: ['Blue', 'Green', 'Gray', 'Teal', 'Violet'],
            hairStyles: ['Long', 'Straight and Sleek', 'Braids', 'Cascading Curls', 'Halo Braid']
        },
        Dwarf: {
            skinColors: ['Light Brown', 'Tan', 'Brown', 'Dark Brown', 'Chestnut'],
            hairColors: ['Black', 'Brown', 'Red', 'Gray'],
            eyeColors: ['Brown', 'Dark Brown', 'Hazel'],
            hairStyles: ['Braided', 'Short', 'Beard with Braids', 'Moustache']
        },
        Orc: {
            skinColors: ['Green', 'Dark Green', 'Grey'],
            hairColors: ['Black', 'Brown', null], // 50% chance of bald
            eyeColors: ['Yellow', 'Amber', 'Red', 'Brown'],
            hairStyles: ['Short', 'Buzz Cut', 'Bald']
        },
        Halfling: {
            skinColors: ['Fair', 'Medium', 'Tan', 'Olive'],
            hairColors: ['Black', 'Brown', 'Blonde', 'Red'],
            eyeColors: ['Brown', 'Green', 'Blue'],
            hairStyles: ['Short', 'Curly', 'Loose Waves', 'Afro']
        },
        Goliath: {
            skinColors: ['Grey', 'Light Grey', 'Brown'],
            hairColors: ['Black', 'Gray', null], // Mostly bald
            eyeColors: ['Blue', 'Green'],
            hairStyles: ['Buzz Cut', 'Bald', 'Short']
        },
        Changeling: {
            skinColors: ['Grey'],
            hairColors: ['Silver', 'White'],
            eyeColors: ['Black', 'Gray', 'White'],
            hairStyles: ['Long', 'Straight', 'Sleek']
        },
        Goblin: {
            skinColors: ['Yellow', 'Orange', 'Red', 'Light Green', 'Dark Green'],
            hairColors: ['Black', 'Brown', null], // 60% chance of bald
            eyeColors: ['Amber', 'Red', 'Yellow'],
            hairStyles: ['Buzz Cut', 'Short', 'Bald']
        },
        Kobold: {
            skinColors: ['Reddish Brown', 'Black'],
            hairColors: [null], // Always bald
            eyeColors: ['Burnt Orange', 'Red'],
            hairStyles: ['Bald']
        },
        Animalfolk: {
            skinColors: ['Grey Fur', 'Brown Fur', 'White Fur', 'Golden Fur', 'Black Fur'],
            hairColors: ['Fur Color'], // Fur serves as hair
            eyeColors: ['Brown', 'Amber', 'Green', 'Blue'],
            hairStyles: ['Animal Fur Style'] // Fur replaces hairstyle
        }
    };

    // Get the valid options for the selected race
    const validTraits = raceTraits[race] || raceTraits['Human'];

    // Randomize traits
    const randomSkinColor = lockedInputs['skinColor']
        ? document.getElementById('skinColor').value
        : validTraits.skinColors[Math.floor(Math.random() * validTraits.skinColors.length)];

    const randomHairColor = lockedInputs['hairColor']
        ? document.getElementById('hairColor').value
        : validTraits.hairColors[Math.floor(Math.random() * validTraits.hairColors.length)];

    const randomEyeColor = lockedInputs['leftEyeColor']
        ? document.getElementById('leftEyeColor').value
        : validTraits.eyeColors[Math.floor(Math.random() * validTraits.eyeColors.length)];

    const shouldDifferEyes = Math.random() < 0.1; // 10% chance for heterochromia
    const randomLeftEyeColor = lockedInputs['leftEyeColor']
        ? document.getElementById('leftEyeColor').value
        : (shouldDifferEyes ? validTraits.eyeColors[Math.floor(Math.random() * validTraits.eyeColors.length)] : randomEyeColor);

    const randomRightEyeColor = lockedInputs['rightEyeColor']
        ? document.getElementById('rightEyeColor').value
        : (shouldDifferEyes ? validTraits.eyeColors[Math.floor(Math.random() * validTraits.eyeColors.length)] : randomEyeColor);

    const randomHairStyle = lockedInputs['hairStyle']
        ? document.getElementById('hairStyle').value
        : validTraits.hairStyles[Math.floor(Math.random() * validTraits.hairStyles.length)];

    // Update the UI with randomized values
    document.getElementById('bloodType').value = lockedInputs['bloodType']
        ? document.getElementById('bloodType').value
        : ['A', 'B', 'AB', 'O'][Math.floor(Math.random() * 4)];
    document.getElementById('skinColor').value = randomSkinColor;
    document.getElementById('hairColor').value = randomHairColor || 'Bald'; // Handle bald cases
    document.getElementById('leftEyeColor').value = randomLeftEyeColor;
    document.getElementById('rightEyeColor').value = randomRightEyeColor;
    document.getElementById('hairStyle').value = randomHairStyle || 'Bald'; // Handle bald cases
}

function randomizeHeightAndWeight() {
    const race = document.getElementById('race').value;

    // Race-specific height (in inches) and weight (in kg) ranges
    const raceTraits = {
        Human: {
            height: { mean: 66, stddev: 6, min: 60, max: 78 }, // 5'0" to 6'6"
            weight: { mean: 68, stddev: 15, min: 50, max: 120 }
        },
        Elf: {
            height: { mean: 68, stddev: 4, min: 62, max: 74 }, // 5'2" to 6'2"
            weight: { mean: 55, stddev: 8, min: 45, max: 65 }  // BMI ranges from underweight to normal
        },
        Dwarf: {
            height: { mean: 52, stddev: 3, min: 48, max: 56 }, // 4'0" to 4'8"
            weight: { mean: 80, stddev: 10, min: 70, max: 100 }
        },
        Orc: {
            height: { mean: 72, stddev: 5, min: 68, max: 80 }, // 5'8" to 6'8"
            weight: { mean: 100, stddev: 20, min: 85, max: 150 }
        },
        Halfling: {
            height: { mean: 36, stddev: 2, min: 34, max: 40 }, // 2'10" to 3'4"
            weight: { mean: 40, stddev: 5, min: 35, max: 50 }
        },
        Goliath: {
            height: { mean: 84, stddev: 6, min: 78, max: 96 }, // 6'6" to 8'0"
            weight: { mean: 120, stddev: 20, min: 100, max: 160 }
        },
        Changeling: {
            height: { mean: 66, stddev: 5, min: 60, max: 72 }, // 5'0" to 6'0"
            weight: { mean: 60, stddev: 10, min: 50, max: 70 }
        },
        Goblin: {
            height: { mean: 40, stddev: 4, min: 36, max: 48 }, // 3'0" to 4'0"
            weight: { mean: 35, stddev: 5, min: 30, max: 45 }
        },
        Kobold: {
            height: { mean: 36, stddev: 3, min: 30, max: 42 }, // 2'6" to 3'6"
            weight: { mean: 30, stddev: 5, min: 25, max: 40 }
        },
        Animalfolk: {
            height: { mean: 66, stddev: 6, min: 60, max: 78 }, // 5'0" to 6'6"
            weight: { mean: 70, stddev: 15, min: 55, max: 100 }
        }
    };

    // Get the traits for the selected race, defaulting to Human if the race is not recognized
    const traits = raceTraits[race] || raceTraits['Human'];

    // Randomize height (in inches) using Gaussian distribution and clamp within race range
    let heightInches = Math.round(randomGaussian(traits.height.mean, traits.height.stddev));
    heightInches = Math.max(traits.height.min, Math.min(traits.height.max, heightInches));

    // Convert height to feet and inches
    const feet = Math.floor(heightInches / 12);
    const inches = heightInches % 12;

    // Randomize weight (in kg) using Gaussian distribution and clamp within race range
    let weightKg = Math.round(randomGaussian(traits.weight.mean, traits.weight.stddev));
    weightKg = Math.max(traits.weight.min, Math.min(traits.weight.max, weightKg));

    // Update the UI with the randomized height and weight
    document.getElementById('height').value = `${feet} feet ${inches} inches`;
    document.getElementById('weight').value = `${weightKg} kg`;

    // Recalculate BMI and body build
    calculateBMIAndAssignBodyBuild();
}

// Gaussian random number generator (for normal distribution)
function randomGaussian(mean, stddev) {
    let u1 = 1 - Math.random(); // Uniform(0,1) random doubles
    let u2 = 1 - Math.random();
    let z = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2.0 * Math.PI * u2); // Box-Muller transform
    return mean + z * stddev; // Random number based on the Gaussian distribution
}

// Function to calculate BMI and assign body build
function calculateBMIAndAssignBodyBuild() {
    const heightText = document.getElementById('height').value;
    const weightKg = parseFloat(document.getElementById('weight').value);

    const heightMatch = heightText.match(/^(\d+)\s*feet\s*(\d+)\s*inches$/);
    if (!heightMatch) {
        console.error("Height format is incorrect. Expected format: X feet Y inches.");
        return;
    }
    const feet = parseInt(heightMatch[1], 10);
    const inches = parseInt(heightMatch[2], 10);

    const heightInMeters = (feet * 0.3048) + (inches * 0.0254);
    const bmi = weightKg / Math.pow(heightInMeters, 2);

    let bmiCategory = "";
    if (bmi < 18.5) {
        bmiCategory = "Underweight";
    } else if (bmi < 24.9) {
        bmiCategory = "Normal weight";
    } else if (bmi < 29.9) {
        bmiCategory = "Overweight";
    } else {
        bmiCategory = "Obese";
    }

    const bodyBuildOptions = {
        "Underweight": ["Slim", "Lean", "Petite", "Bony"],
        "Normal weight": ["Average", "Athletic", "Slim", "Fit", "Toned", "Defined", "Balanced"],
        "Overweight": ["Muscle-Fat", "Heavy","Round","Full-Figured", "Chubby", "Built Body", "Powerlifter"],
        "Obese": ["Heavy", "Soft Fat", "Bulky", "Stocky", "Full-bodied", "Large", "Big-Boned", "Overweight"]
    };

    const bodyBuildPool = bodyBuildOptions[bmiCategory];
    const randomBodyBuild = bodyBuildPool[Math.floor(Math.random() * bodyBuildPool.length)];

    document.getElementById('bmi').innerText = `BMI: ${bmi.toFixed(2)} (${bmiCategory})`;
    document.getElementById('bodyBuild').innerText = `Body Build: ${randomBodyBuild}`;
}

function setPixelArtAsBackground() {
    // Get the pixel art image source from the <img> tag
    const pixelArtImage = document.querySelector('#statusDisplay img').src;

    // Apply the pixel art as background to the top part only
    const statusTop = document.getElementById('statusTop');
    statusTop.style.backgroundImage = `url(${pixelArtImage})`;
    statusTop.style.backgroundRepeat = 'repeat';  // Repeat the image
    statusTop.style.backgroundSize = 'auto';      // Keep the original size
    statusTop.style.backgroundPosition = 'center';
    statusTop.style.height = '400px';             // Adjust the height as needed
    
    const statusBottom = document.getElementById('statusBottom');
    statusBottom.style.backgroundImage = `url(${pixelArtImage})`;
    statusBottom.style.backgroundRepeat = 'repeat';  // Repeat the image
    statusBottom.style.backgroundSize = 'auto';      // Keep the original size
    statusBottom.style.backgroundPosition = 'center';
    statusBottom.style.height = '400px';             // Adjust the height as needed
}

function randomizeHWBMI() {
	randomizeHeightAndWeight();
	calculateBMIAndAssignBodyBuild();
	updateStatus();  
}
function saveGeneration(isFinalGeneration = false) {
    const firstName = document.getElementById('firstName').value || "Unknown";
    const lastName = document.getElementById('lastName').value || "Hero";
    const characterName = `${firstName}_${lastName}`.replace(/\s+/g, '_');
	const race = document.getElementById('race').value; // Get the race
    const statusText = document.getElementById('statusDisplay').innerText.trim();
    const pixelArtImage = document.querySelector('#statusDisplay img').src;
    const potential = document.getElementById('potentialDisplay').innerText;
    const combatClass = document.getElementById('combatClass').value;

    const characterData = {
        key: characterName,
        firstName,
        lastName,
		race,
        potential,
        combatClass,
        statusText,
        pixelArtImage,
        timestamp: Date.now()
    };

    const request = indexedDB.open("characterDatabase", 2);
    request.onsuccess = function(event) {
        const db = event.target.result;
        const transaction = db.transaction(["characters"], "readwrite");
        const objectStore = transaction.objectStore("characters");

        // Check if the character already exists
        const getRequest = objectStore.get(characterData.key);
        getRequest.onsuccess = function() {
            if (getRequest.result) {
                // If the character exists, update it
                objectStore.put(characterData);
            } else {
                // If it doesn't exist, add it
                objectStore.add(characterData);
            }
        };
        
    transaction.oncomplete = function() {
            // Call updateCharacterList only if it's the final generation
            if (isFinalGeneration) {
                updateCharacterList();
            }
        };
    };

    request.onerror = function(event) {
        console.error("IndexedDB error:", event.target.error);
    };
}

function updateCharacterList() {
    const characterList = document.getElementById('characterList').querySelector('tbody');
    const container = document.getElementById('characterListContainer');
    characterList.innerHTML = ""; // Clear existing rows

    const request = indexedDB.open("characterDatabase", 2);

    request.onsuccess = function(event) {
        const db = event.target.result;
        const transaction = db.transaction(["characters"], "readonly");
        const objectStore = transaction.objectStore("characters");
        const cursorRequest = objectStore.openCursor();
        const characters = [];

        cursorRequest.onsuccess = function(event) {
            const cursor = event.target.result;
            if (cursor) {
                // Ensure we're not pushing duplicate entries
                if (!characters.some(c => c.key === cursor.value.key)) {
                    characters.push(cursor.value);
                }
                cursor.continue(); // Continue to next entry
            } else {
                // Sort characters by timestamp (oldest to newest)
                characters.sort((a, b) => a.timestamp - b.timestamp);

                // Populate the table with sorted characters
                characters.forEach((character, index) => {
                    const row = document.createElement('tr');

                    // Number column
                    const numberCell = document.createElement('td');
                    numberCell.textContent = index + 1; // Start numbering from 1
                    row.appendChild(numberCell);

                    // Name column
                    const nameCell = document.createElement('td');
                    nameCell.textContent = `${character.firstName} ${character.lastName}`;
                    row.appendChild(nameCell);
					
					 // Race column
                    const raceCell = document.createElement('td');
                    raceCell.textContent = `${character.race}`; // Display the race and traits
                    row.appendChild(raceCell);
					
                    // Potential column
                    const potentialCell = document.createElement('td');
                    potentialCell.textContent = character.potential || "Unknown";
                    row.appendChild(potentialCell);

                    // Combat Class column
                    const combatClassCell = document.createElement('td');
                    combatClassCell.textContent = character.combatClass || "None";
                    row.appendChild(combatClassCell);

                    // Emblem column
                    const emblemCell = document.createElement('td');
                    const emblemImg = document.createElement('img');
                    emblemImg.src = character.pixelArtImage;
                    emblemImg.alt = "Emblem";
                    emblemImg.style.width = "150px";
                    emblemImg.style.height = "150px";
                    emblemImg.style.objectFit = "cover";
                    emblemImg.style.borderRadius = "50%";
                    emblemCell.appendChild(emblemImg);
                    row.appendChild(emblemCell);

                    // Load button column
                    const actionCell = document.createElement('td');
                    const loadButton = document.createElement('button');
                    loadButton.textContent = "Load";
                    loadButton.onclick = () => loadCharacterFromList(character.key); // Attach load function
                    actionCell.appendChild(loadButton);
                    row.appendChild(actionCell);

                    // Append the row to the table
                    characterList.appendChild(row);
                });

                // Check if the container exists and is currently displayed
                if (container && container.style.display === 'block') {
                    setTimeout(() => {
                        container.style.maxHeight = container.scrollHeight + "px"; // Recalculate height smoothly
                    }, 50);
                }
            }
        };

        cursorRequest.onerror = function(event) {
            console.error("Error loading characters:", event.target.error);
        };
    };

    request.onerror = function(event) {
        console.error("IndexedDB error:", event.target.error);
    };
}


function loadCharacterFromList(characterKey) {
    const request = indexedDB.open("characterDatabase", 2);
    request.onsuccess = function(event) {
        const db = event.target.result;
        const transaction = db.transaction(["characters"], "readonly");
        const objectStore = transaction.objectStore("characters");
        const getRequest = objectStore.get(characterKey);
        
        getRequest.onsuccess = function() {
            const characterData = getRequest.result;
            if (characterData) {
                document.getElementById('firstName').value = characterData.firstName;
                document.getElementById('lastName').value = characterData.lastName;
                document.getElementById('potentialDisplay').innerText = characterData.potential;
                document.getElementById('combatClass').value = characterData.combatClass;
                document.getElementById('statusDisplay').innerHTML = `
                    <figure>
                        <img src="${characterData.pixelArtImage}" alt="Pixel Art">
                    </figure>
                    <p>${characterData.statusText}</p>
                `;
            } else {
                alert("Character data not found!");
            }
            setPixelArtAsBackground();
        };
        
        getRequest.onerror = function() {
            console.error("Error fetching character data:", getRequest.error);
        };
    };
}



function toggleCharacterList() {
    const container = document.getElementById('characterListContainer');
    const header = document.querySelector('h2[onclick="toggleCharacterList()"]');

    if (container.style.display === 'none' || container.style.display === '') {
        // Expand the list
        container.style.display = 'block';
        container.style.maxHeight = container.scrollHeight + "px"; // Set height dynamically
        header.textContent = "Saved Characters ▲"; // Update toggle indicator
    } else {
        // Collapse the list
        container.style.maxHeight = '0';
        setTimeout(() => {
            container.style.display = 'none';
        }, 500); // Wait for transition to finish before hiding
        header.textContent = "Saved Characters ▼"; // Update toggle indicator
    }
	updateCharacterList();
}
function randomizeAndUpdate() {
    randomizeStatus(); // Calls the randomizeStatus function
	randomizeRace();
	randomizePhysicalAppearance();
	randomizeHeightAndWeight();
	calculateBMIAndAssignBodyBuild();
    updateStatus();    // Then calls the updateStatus function
    setPixelArtAsBackground();
	saveGeneration();
	updateCharacterList();
}
function randomizeAndUpdatee() {
    randomizeStatus(); // Calls the randomizeStatus function
	randomizeRace();
	randomizePhysicalAppearance();
	randomizeHeightAndWeight();
	calculateBMIAndAssignBodyBuild();
    updateStatus();    // Then calls the updateStatus function
    setPixelArtAsBackground();
	saveGeneration();
}
function generateMultipleTimes(times) {
    for (let i = 0; i < times; i++) {
        randomizeAndUpdatee(); // Generate character
        if (i === times - 1) {
            // Only on the last iteration, set isFinalGeneration to true
            saveGeneration(true); // This will trigger updateCharacterList after the last save
        } else {
            saveGeneration(false); // Prevent calling updateCharacterList for intermediate saves
        }
    }

    // Notify the user that the characters have been generated
    alert(`${times} characters generated!`);
}
function generateMultipleTimesFromInput() {
    const times = document.getElementById('generateTimes').value;
    generateMultipleTimes(parseInt(times, 10)); // Generate based on the input value
}
function exportStatus() {
    const { jsPDF } = window.jspdf;

    const statusText = document.getElementById('statusDisplay').innerText.trim();
    const firstName = document.getElementById('firstName').value || "Unknown";
    const lastName = document.getElementById('lastName').value || "Hero";
    const characterName = `${firstName}_${lastName}`.replace(/\s+/g, '_');

    // Get the pixel art image source from the <img> tag
    const pixelArtImage = document.querySelector('#statusDisplay img').src;

    // Create a new PDF document
    const doc = new jsPDF();

    // Add the pixel art image to the PDF
    const imgWidth = 80;  // Adjust width as needed
    const imgHeight = 80; // Adjust height as needed
    doc.addImage(pixelArtImage, 'PNG', 15, 10, imgWidth, imgHeight);

    // Add the status text to the PDF
    doc.setFontSize(12);
    const splitText = doc.splitTextToSize(statusText, 180);
    doc.text(splitText, 15, 100);

    // Save the PDF with the character's name
    doc.save(`${characterName}_Status.pdf`);
}
function filterCharacterList() {
    const searchQuery = document.getElementById('searchInput').value.toLowerCase();
    const rows = document.querySelectorAll('#characterList tbody tr');

    rows.forEach(row => {
        const nameCell = row.querySelector('td:nth-child(2)');
        const name = nameCell ? nameCell.textContent.toLowerCase() : '';
        // Show row if the name matches the search query
        row.style.display = name.includes(searchQuery) ? '' : 'none';
    });
}
let sortAscending = true; // Track sorting order

function sortCharacterListByPotential() {
    const rows = Array.from(document.querySelectorAll('#characterList tbody tr'));
    
    rows.sort((a, b) => {
        const potentialA = parseInt(a.querySelector('td:nth-child(4)').textContent) || 0;
        const potentialB = parseInt(b.querySelector('td:nth-child(4)').textContent) || 0;

        return sortAscending ? potentialA - potentialB : potentialB - potentialA;
    });

    // Toggle sorting order
    sortAscending = !sortAscending;

    // Append sorted rows back to the table
    const tbody = document.querySelector('#characterList tbody');
    rows.forEach(row => tbody.appendChild(row));
}
let sortNameAscending = true; // Track sorting order for names

function sortCharacterListAlphabetically() {
    const rows = Array.from(document.querySelectorAll('#characterList tbody tr'));

    rows.sort((a, b) => {
        const nameA = a.querySelector('td:nth-child(2)').textContent.toLowerCase();
        const nameB = b.querySelector('td:nth-child(2)').textContent.toLowerCase();

        if (nameA < nameB) return sortNameAscending ? -1 : 1;
        if (nameA > nameB) return sortNameAscending ? 1 : -1;
        return 0;
    });

    // Toggle sorting order
    sortNameAscending = !sortNameAscending;

    // Append sorted rows back to the table
    const tbody = document.querySelector('#characterList tbody');
    rows.forEach(row => tbody.appendChild(row));
}
let sortNumberAscending = true; // Track sorting order for the Number column

function sortCharacterListByNumber() {
    const rows = Array.from(document.querySelectorAll('#characterList tbody tr'));

    rows.sort((a, b) => {
        const numberA = parseInt(a.querySelector('td:first-child').textContent, 10);
        const numberB = parseInt(b.querySelector('td:first-child').textContent, 10);

        return sortNumberAscending ? numberA - numberB : numberB - numberA;
    });

    // Toggle sorting order
    sortNumberAscending = !sortNumberAscending;

    // Append sorted rows back to the table
    const tbody = document.querySelector('#characterList tbody');
    rows.forEach(row => tbody.appendChild(row));
	}
	document.getElementById("goToMovingCharacters").addEventListener("click", function () {
        // Navigate to the new page
        window.location.href = "moving_characters.html"; // Replace with the actual filename
    });
function navigateToBattleSimulator() {
    window.location.href = "battle_simulator.html"; // Path to your new HTML file
}

</script>

</body>
</html>
